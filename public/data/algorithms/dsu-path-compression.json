{
  "slug": "dsu-path-compression",
  "name": "Dsu Path Compression",
  "categories": [
    "datastructures"
  ],
  "body": {},
  "implementations": {
    "c-plus-plus": {
      "dir": "data_structures\\dsu_path_compression.cpp",
      "url": "https://github.com/TheAlgorithms/c-plus-plus/tree/master/data_structures\\dsu_path_compression.cpp",
      "code": "<span class=\"hljs-comment\">/**\r\n * @file\r\n * @brief [DSU (Disjoint\r\n * sets)](https://en.wikipedia.org/wiki/Disjoint-set-data_structure)\r\n * @details\r\n * It is a very powerful data structure that keeps track of different\r\n * clusters(sets) of elements, these sets are disjoint(doesnot have a common\r\n * element). Disjoint sets uses cases : for finding connected components in a\r\n * graph, used in Kruskal&#x27;s algorithm for finding Minimum Spanning tree.\r\n * Operations that can be performed:\r\n * 1) UnionSet(i,j): add(element i and j to the set)\r\n * 2) findSet(i): returns the representative of the set to which i belogngs to.\r\n * 3) get_max(i),get_min(i) : returns the maximum and minimum\r\n * Below is the class-based approach which uses the heuristic of path\r\n * compression. Using path compression in findSet(i),we are able to get to the\r\n * representative of i in O(1) time.\r\n * @author [AayushVyasKIIT](https://github.com/AayushVyasKIIT)\r\n * @see dsu_union_rank.cpp\r\n */</span>\r\n\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;cassert&gt;</span>   <span class=\"hljs-comment\">/// for assert</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;iostream&gt;</span>  <span class=\"hljs-comment\">/// for IO operations</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;vector&gt;</span>    <span class=\"hljs-comment\">/// for std::vector</span></span>\r\n\r\n<span class=\"hljs-keyword\">using</span> std::cout;\r\n<span class=\"hljs-keyword\">using</span> std::endl;\r\n<span class=\"hljs-keyword\">using</span> std::vector;\r\n\r\n<span class=\"hljs-comment\">/**\r\n * @brief Disjoint sets union data structure, class based representation.\r\n * @param n number of elements\r\n */</span>\r\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">dsu</span> {\r\n <span class=\"hljs-keyword\">private</span>:\r\n    vector&lt;<span class=\"hljs-type\">uint64_t</span>&gt; p;           <span class=\"hljs-comment\">///&lt; keeps track of the parent of ith element</span>\r\n    vector&lt;<span class=\"hljs-type\">uint64_t</span>&gt; depth;       <span class=\"hljs-comment\">///&lt; tracks the depth(rank) of i in the tree</span>\r\n    vector&lt;<span class=\"hljs-type\">uint64_t</span>&gt; setSize;     <span class=\"hljs-comment\">///&lt; size of each chunk(set)</span>\r\n    vector&lt;<span class=\"hljs-type\">uint64_t</span>&gt; maxElement;  <span class=\"hljs-comment\">///&lt; maximum of each set to which i belongs to</span>\r\n    vector&lt;<span class=\"hljs-type\">uint64_t</span>&gt; minElement;  <span class=\"hljs-comment\">///&lt; minimum of each set to which i belongs to</span>\r\n <span class=\"hljs-keyword\">public</span>:\r\n    <span class=\"hljs-comment\">/**\r\n     * @brief contructor for initialising all data members.\r\n     * @param n number of elements\r\n     */</span>\r\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">explicit</span> <span class=\"hljs-title\">dsu</span><span class=\"hljs-params\">(<span class=\"hljs-type\">uint64_t</span> n)</span> </span>{\r\n        p.<span class=\"hljs-built_in\">assign</span>(n, <span class=\"hljs-number\">0</span>);\r\n        <span class=\"hljs-comment\">/// initially, all of them are their own parents</span>\r\n        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">uint64_t</span> i = <span class=\"hljs-number\">0</span>; i &lt; n; i++) {\r\n            p[i] = i;\r\n        }\r\n        <span class=\"hljs-comment\">/// initially all have depth are equals to zero</span>\r\n        depth.<span class=\"hljs-built_in\">assign</span>(n, <span class=\"hljs-number\">0</span>);\r\n        maxElement.<span class=\"hljs-built_in\">assign</span>(n, <span class=\"hljs-number\">0</span>);\r\n        minElement.<span class=\"hljs-built_in\">assign</span>(n, <span class=\"hljs-number\">0</span>);\r\n        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">uint64_t</span> i = <span class=\"hljs-number\">0</span>; i &lt; n; i++) {\r\n            depth[i] = <span class=\"hljs-number\">0</span>;\r\n            maxElement[i] = i;\r\n            minElement[i] = i;\r\n        }\r\n        setSize.<span class=\"hljs-built_in\">assign</span>(n, <span class=\"hljs-number\">0</span>);\r\n        <span class=\"hljs-comment\">/// initially set size will be equals to one</span>\r\n        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">uint64_t</span> i = <span class=\"hljs-number\">0</span>; i &lt; n; i++) {\r\n            setSize[i] = <span class=\"hljs-number\">1</span>;\r\n        }\r\n    }\r\n\r\n    <span class=\"hljs-comment\">/**\r\n     * @brief Method to find the representative of the set to which i belongs\r\n     * to, T(n) = O(1)\r\n     * @param i element of some set\r\n     * @returns representative of the set to which i belongs to.\r\n     */</span>\r\n    <span class=\"hljs-function\"><span class=\"hljs-type\">uint64_t</span> <span class=\"hljs-title\">findSet</span><span class=\"hljs-params\">(<span class=\"hljs-type\">uint64_t</span> i)</span> </span>{\r\n        <span class=\"hljs-comment\">/// using path compression</span>\r\n        <span class=\"hljs-keyword\">if</span> (p[i] == i) {\r\n            <span class=\"hljs-keyword\">return</span> i;\r\n        }\r\n        <span class=\"hljs-keyword\">return</span> (p[i] = <span class=\"hljs-built_in\">findSet</span>(p[i]));\r\n    }\r\n    <span class=\"hljs-comment\">/**\r\n     * @brief Method that combines two disjoint sets to which i and j belongs to\r\n     * and make a single set having a common representative.\r\n     * @param i element of some set\r\n     * @param j element of some set\r\n     * @returns void\r\n     */</span>\r\n    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">UnionSet</span><span class=\"hljs-params\">(<span class=\"hljs-type\">uint64_t</span> i, <span class=\"hljs-type\">uint64_t</span> j)</span> </span>{\r\n        <span class=\"hljs-comment\">/// check if both belongs to the same set or not</span>\r\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">isSame</span>(i, j)) {\r\n            <span class=\"hljs-keyword\">return</span>;\r\n        }\r\n\r\n        <span class=\"hljs-comment\">// we find the representative of the i and j</span>\r\n        <span class=\"hljs-type\">uint64_t</span> x = <span class=\"hljs-built_in\">findSet</span>(i);\r\n        <span class=\"hljs-type\">uint64_t</span> y = <span class=\"hljs-built_in\">findSet</span>(j);\r\n\r\n        <span class=\"hljs-comment\">/// always keeping the min as x</span>\r\n        <span class=\"hljs-comment\">/// shallow tree</span>\r\n        <span class=\"hljs-keyword\">if</span> (depth[x] &gt; depth[y]) {\r\n            std::<span class=\"hljs-built_in\">swap</span>(x, y);\r\n        }\r\n        <span class=\"hljs-comment\">/// making the shallower root&#x27;s parent the deeper root</span>\r\n        p[x] = y;\r\n\r\n        <span class=\"hljs-comment\">/// if same depth, then increase one&#x27;s depth</span>\r\n        <span class=\"hljs-keyword\">if</span> (depth[x] == depth[y]) {\r\n            depth[y]++;\r\n        }\r\n        <span class=\"hljs-comment\">/// total size of the resultant set</span>\r\n        setSize[y] += setSize[x];\r\n        <span class=\"hljs-comment\">/// changing the maximum elements</span>\r\n        maxElement[y] = std::<span class=\"hljs-built_in\">max</span>(maxElement[x], maxElement[y]);\r\n        minElement[y] = std::<span class=\"hljs-built_in\">min</span>(minElement[x], minElement[y]);\r\n    }\r\n    <span class=\"hljs-comment\">/**\r\n     * @brief A utility function which check whether i and j belongs to\r\n     * same set or not\r\n     * @param i element of some set\r\n     * @param j element of some set\r\n     * @returns `true` if element `i` and `j` ARE in the same set\r\n     * @returns `false` if element `i` and `j` are NOT in same set\r\n     */</span>\r\n    <span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">isSame</span><span class=\"hljs-params\">(<span class=\"hljs-type\">uint64_t</span> i, <span class=\"hljs-type\">uint64_t</span> j)</span> </span>{\r\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">findSet</span>(i) == <span class=\"hljs-built_in\">findSet</span>(j)) {\r\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\r\n        }\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\r\n    }\r\n    <span class=\"hljs-comment\">/**\r\n     * @brief prints the minimum, maximum and size of the set to which i belongs\r\n     * to\r\n     * @param i element of some set\r\n     * @returns void\r\n     */</span>\r\n    <span class=\"hljs-function\">vector&lt;<span class=\"hljs-type\">uint64_t</span>&gt; <span class=\"hljs-title\">get</span><span class=\"hljs-params\">(<span class=\"hljs-type\">uint64_t</span> i)</span> </span>{\r\n        vector&lt;<span class=\"hljs-type\">uint64_t</span>&gt; ans;\r\n        ans.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-built_in\">get_min</span>(i));\r\n        ans.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-built_in\">get_max</span>(i));\r\n        ans.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-built_in\">size</span>(i));\r\n        <span class=\"hljs-keyword\">return</span> ans;\r\n    }\r\n    <span class=\"hljs-comment\">/**\r\n     * @brief A utility function that returns the size of the set to which i\r\n     * belongs to\r\n     * @param i element of some set\r\n     * @returns size of the set to which i belongs to\r\n     */</span>\r\n    <span class=\"hljs-function\"><span class=\"hljs-type\">uint64_t</span> <span class=\"hljs-title\">size</span><span class=\"hljs-params\">(<span class=\"hljs-type\">uint64_t</span> i)</span> </span>{ <span class=\"hljs-keyword\">return</span> setSize[<span class=\"hljs-built_in\">findSet</span>(i)]; }\r\n    <span class=\"hljs-comment\">/**\r\n     * @brief A utility function that returns the max element of the set to\r\n     * which i belongs to\r\n     * @param i element of some set\r\n     * @returns maximum of the set to which i belongs to\r\n     */</span>\r\n    <span class=\"hljs-function\"><span class=\"hljs-type\">uint64_t</span> <span class=\"hljs-title\">get_max</span><span class=\"hljs-params\">(<span class=\"hljs-type\">uint64_t</span> i)</span> </span>{ <span class=\"hljs-keyword\">return</span> maxElement[<span class=\"hljs-built_in\">findSet</span>(i)]; }\r\n    <span class=\"hljs-comment\">/**\r\n     * @brief A utility function that returns the min element of the set to\r\n     * which i belongs to\r\n     * @param i element of some set\r\n     * @returns minimum of the set to which i belongs to\r\n     */</span>\r\n    <span class=\"hljs-function\"><span class=\"hljs-type\">uint64_t</span> <span class=\"hljs-title\">get_min</span><span class=\"hljs-params\">(<span class=\"hljs-type\">uint64_t</span> i)</span> </span>{ <span class=\"hljs-keyword\">return</span> minElement[<span class=\"hljs-built_in\">findSet</span>(i)]; }\r\n};\r\n\r\n<span class=\"hljs-comment\">/**\r\n * @brief Self-test implementations, 1st test\r\n * @returns void\r\n */</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-type\">static</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title\">test1</span><span class=\"hljs-params\">()</span> </span>{\r\n    <span class=\"hljs-comment\">// the minimum, maximum, and size of the set</span>\r\n    <span class=\"hljs-type\">uint64_t</span> n = <span class=\"hljs-number\">10</span>;  <span class=\"hljs-comment\">///&lt; number of items</span>\r\n    <span class=\"hljs-function\">dsu <span class=\"hljs-title\">d</span><span class=\"hljs-params\">(n + <span class=\"hljs-number\">1</span>)</span></span>;     <span class=\"hljs-comment\">///&lt; object of class disjoint sets</span>\r\n    <span class=\"hljs-comment\">// set 1</span>\r\n    d.<span class=\"hljs-built_in\">UnionSet</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>);  <span class=\"hljs-comment\">// performs union operation on 1 and 2</span>\r\n    d.<span class=\"hljs-built_in\">UnionSet</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">4</span>);  <span class=\"hljs-comment\">// performs union operation on 1 and 4</span>\r\n    vector&lt;<span class=\"hljs-type\">uint64_t</span>&gt; ans = {<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">3</span>};\r\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">uint64_t</span> i = <span class=\"hljs-number\">0</span>; i &lt; ans.<span class=\"hljs-built_in\">size</span>(); i++) {\r\n        <span class=\"hljs-built_in\">assert</span>(d.<span class=\"hljs-built_in\">get</span>(<span class=\"hljs-number\">4</span>).<span class=\"hljs-built_in\">at</span>(i) == ans[i]);  <span class=\"hljs-comment\">// makes sure algorithm works fine</span>\r\n    }\r\n    cout &lt;&lt; <span class=\"hljs-string\">&quot;1st test passed!&quot;</span> &lt;&lt; endl;\r\n}\r\n<span class=\"hljs-comment\">/**\r\n * @brief Self-implementations, 2nd test\r\n * @returns void\r\n */</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-type\">static</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title\">test2</span><span class=\"hljs-params\">()</span> </span>{\r\n    <span class=\"hljs-comment\">// the minimum, maximum, and size of the set</span>\r\n    <span class=\"hljs-type\">uint64_t</span> n = <span class=\"hljs-number\">10</span>;  <span class=\"hljs-comment\">///&lt; number of items</span>\r\n    <span class=\"hljs-function\">dsu <span class=\"hljs-title\">d</span><span class=\"hljs-params\">(n + <span class=\"hljs-number\">1</span>)</span></span>;     <span class=\"hljs-comment\">///&lt; object of class disjoint sets</span>\r\n    <span class=\"hljs-comment\">// set 1</span>\r\n    d.<span class=\"hljs-built_in\">UnionSet</span>(<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">5</span>);\r\n    d.<span class=\"hljs-built_in\">UnionSet</span>(<span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">6</span>);\r\n    d.<span class=\"hljs-built_in\">UnionSet</span>(<span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">7</span>);\r\n    vector&lt;<span class=\"hljs-type\">uint64_t</span>&gt; ans = {<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">4</span>};\r\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">uint64_t</span> i = <span class=\"hljs-number\">0</span>; i &lt; ans.<span class=\"hljs-built_in\">size</span>(); i++) {\r\n        <span class=\"hljs-built_in\">assert</span>(d.<span class=\"hljs-built_in\">get</span>(<span class=\"hljs-number\">3</span>).<span class=\"hljs-built_in\">at</span>(i) == ans[i]);  <span class=\"hljs-comment\">// makes sure algorithm works fine</span>\r\n    }\r\n    cout &lt;&lt; <span class=\"hljs-string\">&quot;2nd test passed!&quot;</span> &lt;&lt; endl;\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * @brief Main function\r\n * @returns 0 on exit\r\n * */</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span> </span>{\r\n    <span class=\"hljs-type\">uint64_t</span> n = <span class=\"hljs-number\">10</span>;  <span class=\"hljs-comment\">///&lt; number of items</span>\r\n    <span class=\"hljs-function\">dsu <span class=\"hljs-title\">d</span><span class=\"hljs-params\">(n + <span class=\"hljs-number\">1</span>)</span></span>;     <span class=\"hljs-comment\">///&lt; object of class disjoint sets</span>\r\n\r\n    <span class=\"hljs-built_in\">test1</span>();  <span class=\"hljs-comment\">// run 1st test case</span>\r\n    <span class=\"hljs-built_in\">test2</span>();  <span class=\"hljs-comment\">// run 2nd test case</span>\r\n\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\r\n}\r\n"
    }
  },
  "contributors": [
    {
      "name": "Lajat5",
      "email": "64376519+Lazeeez@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Aayush Vyas",
      "email": "1830002@kiit.ac.in",
      "commits": 1
    }
  ],
  "explanationUrl": {}
}