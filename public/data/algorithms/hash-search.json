{
  "slug": "hash-search",
  "name": "Hash Search",
  "categories": [
    "searches"
  ],
  "body": {},
  "implementations": {
    "c-plus-plus": {
      "dir": "search\\hash_search.cpp",
      "url": "https://github.com/TheAlgorithms/c-plus-plus/tree/master/search\\hash_search.cpp",
      "code": "<span class=\"hljs-comment\">/**\r\n * \\file\r\n * \\brief Hash Search Algorithm - Best Time Complexity Ω(1)\r\n *\r\n * \\copyright 2020 Arctic2333\r\n *\r\n * In this algorithm, we use the method of division and reservation remainder to\r\n * construct the hash function, and use the method of chain address to solve the\r\n * conflict, that is, we link a chain list after the data, and store all the\r\n * records whose keywords are synonyms in the same linear chain list.\r\n *\r\n * @warning This program is only for educational purposes. It has serious flaws\r\n * in implementation with regards to memory management resulting in large\r\n * amounts of memory leaks.\r\n * @todo fix the program for memory leaks and better structure in C++ and not C\r\n * fashion\r\n */</span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;cstdlib&gt;</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;iostream&gt;</span></span>\r\n\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> MAX 6      <span class=\"hljs-comment\">///&lt; Determines how much data</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> HASHMAX 5  <span class=\"hljs-comment\">///&lt; Determines the length of the hash table</span></span>\r\n\r\n<span class=\"hljs-type\">int</span> data[MAX] = {<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">7</span>};  <span class=\"hljs-comment\">//!&lt; test data</span>\r\n\r\n<span class=\"hljs-comment\">/**\r\n * a one-way linked list\r\n */</span>\r\n<span class=\"hljs-keyword\">typedef</span> <span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">list</span> {\r\n    <span class=\"hljs-type\">int</span> key;            <span class=\"hljs-comment\">//!&lt; key value for node</span>\r\n    <span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">list</span>* next;  <span class=\"hljs-comment\">//!&lt; pointer to next link in the chain</span>\r\n} node,                 <span class=\"hljs-comment\">/**&lt; define node as one item list */</span>\r\n    *link;              <span class=\"hljs-comment\">///&lt; pointer to nodes</span>\r\n\r\nnode hashtab[HASHMAX];  <span class=\"hljs-comment\">///&lt; array of nodes</span>\r\n\r\n<span class=\"hljs-comment\">// int counter = 1;</span>\r\n\r\n<span class=\"hljs-comment\">/**\r\n * Mode of hash detection :\r\n * Division method\r\n * \\param [in] key to hash\r\n * \\returns hash value for `key`\r\n */</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">h</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> key)</span> </span>{ <span class=\"hljs-keyword\">return</span> key % HASHMAX; }\r\n\r\n<span class=\"hljs-comment\">/**\r\n * The same after the remainder will be added after the same hash header\r\n * To avoid conflict, zipper method is used\r\n * Insert elements into the linked list in the header\r\n * \\param [in] key key to add to list\r\n * \\warning dynamic memory allocated to `n` never gets freed.\r\n * \\todo fix memory leak\r\n */</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">create_list</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> key)</span> </span>{  <span class=\"hljs-comment\">// Construct hash table</span>\r\n    link p, n;\r\n    <span class=\"hljs-type\">int</span> index;\r\n    n = (link)<span class=\"hljs-built_in\">malloc</span>(<span class=\"hljs-built_in\">sizeof</span>(node));\r\n    n-&gt;key = key;\r\n    n-&gt;next = <span class=\"hljs-literal\">NULL</span>;\r\n    index = <span class=\"hljs-built_in\">h</span>(key);\r\n    p = hashtab[index].next;\r\n    <span class=\"hljs-keyword\">if</span> (p != <span class=\"hljs-literal\">NULL</span>) {\r\n        n-&gt;next = p;\r\n        hashtab[index].next = n;\r\n    } <span class=\"hljs-keyword\">else</span> {\r\n        hashtab[index].next = n;\r\n    }\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * Input the key to be searched, and get the hash header position through the H\r\n * (int key) function, then one-dimensional linear search. If found @return\r\n * element depth and number of searches If not found @return -1\r\n */</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">hash_search</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> key, <span class=\"hljs-type\">int</span>* counter)</span> </span>{  <span class=\"hljs-comment\">// Hash lookup function</span>\r\n    link pointer;\r\n    <span class=\"hljs-type\">int</span> index;\r\n\r\n    *counter = <span class=\"hljs-number\">0</span>;\r\n    index = <span class=\"hljs-built_in\">h</span>(key);\r\n    pointer = hashtab[index].next;\r\n\r\n    std::cout &lt;&lt; <span class=\"hljs-string\">&quot;data[&quot;</span> &lt;&lt; index &lt;&lt; <span class=\"hljs-string\">&quot;]:&quot;</span>;\r\n\r\n    <span class=\"hljs-keyword\">while</span> (pointer != <span class=\"hljs-literal\">NULL</span>) {\r\n        counter[<span class=\"hljs-number\">0</span>]++;\r\n        std::cout &lt;&lt; <span class=\"hljs-string\">&quot;data[&quot;</span> &lt;&lt; pointer-&gt;key &lt;&lt; <span class=\"hljs-string\">&quot;]:&quot;</span>;\r\n        <span class=\"hljs-keyword\">if</span> (pointer-&gt;key == key)\r\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span>;\r\n        <span class=\"hljs-keyword\">else</span>\r\n            pointer = pointer-&gt;next;\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\r\n}\r\n\r\n<span class=\"hljs-comment\">/** main function */</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span> </span>{\r\n    link p;\r\n    <span class=\"hljs-type\">int</span> key, index, i, counter;  <span class=\"hljs-comment\">// Key is the value to be found</span>\r\n    index = <span class=\"hljs-number\">0</span>;\r\n\r\n    <span class=\"hljs-comment\">// You can write the input mode here</span>\r\n    <span class=\"hljs-keyword\">while</span> (index &lt; MAX) {  <span class=\"hljs-comment\">// Construct hash table</span>\r\n        <span class=\"hljs-built_in\">create_list</span>(data[index]);\r\n        index++;\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">for</span> (i = <span class=\"hljs-number\">0</span>; i &lt; HASHMAX; i++) {  <span class=\"hljs-comment\">// Output hash table</span>\r\n        std::cout &lt;&lt; <span class=\"hljs-string\">&quot;hashtab [&quot;</span> &lt;&lt; i &lt;&lt; <span class=\"hljs-string\">&quot;]\\n&quot;</span>;\r\n\r\n        p = hashtab[i].next;\r\n\r\n        <span class=\"hljs-keyword\">while</span> (p != <span class=\"hljs-literal\">NULL</span>) {\r\n            std::cout &lt;&lt; <span class=\"hljs-string\">&quot;please int key:&quot;</span>;\r\n            <span class=\"hljs-keyword\">if</span> (p-&gt;key &gt; <span class=\"hljs-number\">0</span>)\r\n                std::cout &lt;&lt; <span class=\"hljs-string\">&quot;[&quot;</span> &lt;&lt; p-&gt;key &lt;&lt; <span class=\"hljs-string\">&quot;]&quot;</span>;\r\n            p = p-&gt;next;\r\n        }\r\n        std::cout &lt;&lt; std::endl;\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">while</span> (key != <span class=\"hljs-number\">-1</span>) {\r\n        <span class=\"hljs-comment\">// You can write the input mode here</span>\r\n        <span class=\"hljs-comment\">// test key = 10</span>\r\n        key = <span class=\"hljs-number\">10</span>;\r\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">hash_search</span>(key, &amp;counter))\r\n            std::cout &lt;&lt; <span class=\"hljs-string\">&quot;search time = &quot;</span> &lt;&lt; counter &lt;&lt; std::endl;\r\n        <span class=\"hljs-keyword\">else</span>\r\n            std::cout &lt;&lt; <span class=\"hljs-string\">&quot;no found!\\n&quot;</span>;\r\n        key = <span class=\"hljs-number\">-1</span>;  <span class=\"hljs-comment\">// Exit test</span>\r\n        <span class=\"hljs-comment\">/* The test sample is returned as:\r\n         * data[0]:data[5]:data[15]:data[10]:search time = 3 The search is\r\n         * successful. There are 10 in this set of data */</span>\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\r\n}\r\n"
    }
  },
  "contributors": [
    {
      "name": "Krishna Vedala",
      "email": "7001608+kvedala@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "苏淞丰",
      "email": "50102735+Arctic2333@users.noreply.github.com",
      "commits": 9
    }
  ],
  "explanationUrl": {}
}