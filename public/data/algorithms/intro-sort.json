{
  "slug": "intro-sort",
  "name": "Intro Sort",
  "categories": [
    "sorts"
  ],
  "body": {},
  "implementations": {
    "python": {
      "dir": "sorts\\intro_sort.py",
      "url": "https://github.com/TheAlgorithms/python/tree/master/sorts\\intro_sort.py",
      "code": "<span class=\"hljs-string\">&quot;&quot;&quot;\r\nIntrospective Sort is hybrid sort (Quick Sort + Heap Sort + Insertion Sort)\r\nif the size of the list is under 16, use insertion sort\r\nhttps://en.wikipedia.org/wiki/Introsort\r\n&quot;&quot;&quot;</span>\r\n<span class=\"hljs-keyword\">import</span> math\r\n\r\n\r\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">insertion_sort</span>(<span class=\"hljs-params\">array: <span class=\"hljs-built_in\">list</span>, start: <span class=\"hljs-built_in\">int</span> = <span class=\"hljs-number\">0</span>, end: <span class=\"hljs-built_in\">int</span> = <span class=\"hljs-number\">0</span></span>) -&gt; <span class=\"hljs-built_in\">list</span>:\r\n    <span class=\"hljs-string\">&quot;&quot;&quot;\r\n    &gt;&gt;&gt; array = [4, 2, 6, 8, 1, 7, 8, 22, 14, 56, 27, 79, 23, 45, 14, 12]\r\n\r\n    &gt;&gt;&gt; insertion_sort(array, 0, len(array))\r\n    [1, 2, 4, 6, 7, 8, 8, 12, 14, 14, 22, 23, 27, 45, 56, 79]\r\n    &quot;&quot;&quot;</span>\r\n    end = end <span class=\"hljs-keyword\">or</span> <span class=\"hljs-built_in\">len</span>(array)\r\n    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(start, end):\r\n        temp_index = i\r\n        temp_index_value = array[i]\r\n        <span class=\"hljs-keyword\">while</span> temp_index != start <span class=\"hljs-keyword\">and</span> temp_index_value &lt; array[temp_index - <span class=\"hljs-number\">1</span>]:\r\n            array[temp_index] = array[temp_index - <span class=\"hljs-number\">1</span>]\r\n            temp_index -= <span class=\"hljs-number\">1</span>\r\n        array[temp_index] = temp_index_value\r\n    <span class=\"hljs-keyword\">return</span> array\r\n\r\n\r\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">heapify</span>(<span class=\"hljs-params\">array: <span class=\"hljs-built_in\">list</span>, index: <span class=\"hljs-built_in\">int</span>, heap_size: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-literal\">None</span>:  <span class=\"hljs-comment\"># Max Heap</span>\r\n    <span class=\"hljs-string\">&quot;&quot;&quot;\r\n    &gt;&gt;&gt; array = [4, 2, 6, 8, 1, 7, 8, 22, 14, 56, 27, 79, 23, 45, 14, 12]\r\n\r\n    &gt;&gt;&gt; heapify(array, len(array) // 2 ,len(array))\r\n    &quot;&quot;&quot;</span>\r\n    largest = index\r\n    left_index = <span class=\"hljs-number\">2</span> * index + <span class=\"hljs-number\">1</span>  <span class=\"hljs-comment\"># Left Node</span>\r\n    right_index = <span class=\"hljs-number\">2</span> * index + <span class=\"hljs-number\">2</span>  <span class=\"hljs-comment\"># Right Node</span>\r\n\r\n    <span class=\"hljs-keyword\">if</span> left_index &lt; heap_size <span class=\"hljs-keyword\">and</span> array[largest] &lt; array[left_index]:\r\n        largest = left_index\r\n\r\n    <span class=\"hljs-keyword\">if</span> right_index &lt; heap_size <span class=\"hljs-keyword\">and</span> array[largest] &lt; array[right_index]:\r\n        largest = right_index\r\n\r\n    <span class=\"hljs-keyword\">if</span> largest != index:\r\n        array[index], array[largest] = array[largest], array[index]\r\n        heapify(array, largest, heap_size)\r\n\r\n\r\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">heap_sort</span>(<span class=\"hljs-params\">array: <span class=\"hljs-built_in\">list</span></span>) -&gt; <span class=\"hljs-built_in\">list</span>:\r\n    <span class=\"hljs-string\">&quot;&quot;&quot;\r\n    &gt;&gt;&gt; array = [4, 2, 6, 8, 1, 7, 8, 22, 14, 56, 27, 79, 23, 45, 14, 12]\r\n\r\n    &gt;&gt;&gt; heap_sort(array)\r\n    [1, 2, 4, 6, 7, 8, 8, 12, 14, 14, 22, 23, 27, 45, 56, 79]\r\n    &quot;&quot;&quot;</span>\r\n    n = <span class=\"hljs-built_in\">len</span>(array)\r\n\r\n    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(n // <span class=\"hljs-number\">2</span>, -<span class=\"hljs-number\">1</span>, -<span class=\"hljs-number\">1</span>):\r\n        heapify(array, i, n)\r\n\r\n    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(n - <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>, -<span class=\"hljs-number\">1</span>):\r\n        array[i], array[<span class=\"hljs-number\">0</span>] = array[<span class=\"hljs-number\">0</span>], array[i]\r\n        heapify(array, <span class=\"hljs-number\">0</span>, i)\r\n\r\n    <span class=\"hljs-keyword\">return</span> array\r\n\r\n\r\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">median_of_3</span>(<span class=\"hljs-params\">\r\n    array: <span class=\"hljs-built_in\">list</span>, first_index: <span class=\"hljs-built_in\">int</span>, middle_index: <span class=\"hljs-built_in\">int</span>, last_index: <span class=\"hljs-built_in\">int</span>\r\n</span>) -&gt; <span class=\"hljs-built_in\">int</span>:\r\n    <span class=\"hljs-string\">&quot;&quot;&quot;\r\n    &gt;&gt;&gt; array = [4, 2, 6, 8, 1, 7, 8, 22, 14, 56, 27, 79, 23, 45, 14, 12]\r\n\r\n    &gt;&gt;&gt; median_of_3(array, 0, 0 + ((len(array) - 0) // 2) + 1, len(array) - 1)\r\n    12\r\n    &quot;&quot;&quot;</span>\r\n    <span class=\"hljs-keyword\">if</span> (array[first_index] &gt; array[middle_index]) != (\r\n        array[first_index] &gt; array[last_index]\r\n    ):\r\n        <span class=\"hljs-keyword\">return</span> array[first_index]\r\n    <span class=\"hljs-keyword\">elif</span> (array[middle_index] &gt; array[first_index]) != (\r\n        array[middle_index] &gt; array[last_index]\r\n    ):\r\n        <span class=\"hljs-keyword\">return</span> array[middle_index]\r\n    <span class=\"hljs-keyword\">else</span>:\r\n        <span class=\"hljs-keyword\">return</span> array[last_index]\r\n\r\n\r\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">partition</span>(<span class=\"hljs-params\">array: <span class=\"hljs-built_in\">list</span>, low: <span class=\"hljs-built_in\">int</span>, high: <span class=\"hljs-built_in\">int</span>, pivot: <span class=\"hljs-built_in\">int</span></span>) -&gt; <span class=\"hljs-built_in\">int</span>:\r\n    <span class=\"hljs-string\">&quot;&quot;&quot;\r\n    &gt;&gt;&gt; array = [4, 2, 6, 8, 1, 7, 8, 22, 14, 56, 27, 79, 23, 45, 14, 12]\r\n\r\n    &gt;&gt;&gt; partition(array, 0, len(array), 12)\r\n    8\r\n    &quot;&quot;&quot;</span>\r\n    i = low\r\n    j = high\r\n    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\r\n        <span class=\"hljs-keyword\">while</span> array[i] &lt; pivot:\r\n            i += <span class=\"hljs-number\">1</span>\r\n        j -= <span class=\"hljs-number\">1</span>\r\n        <span class=\"hljs-keyword\">while</span> pivot &lt; array[j]:\r\n            j -= <span class=\"hljs-number\">1</span>\r\n        <span class=\"hljs-keyword\">if</span> i &gt;= j:\r\n            <span class=\"hljs-keyword\">return</span> i\r\n        array[i], array[j] = array[j], array[i]\r\n        i += <span class=\"hljs-number\">1</span>\r\n\r\n\r\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">sort</span>(<span class=\"hljs-params\">array: <span class=\"hljs-built_in\">list</span></span>) -&gt; <span class=\"hljs-built_in\">list</span>:\r\n    <span class=\"hljs-string\">&quot;&quot;&quot;\r\n    :param collection: some mutable ordered collection with heterogeneous\r\n    comparable items inside\r\n    :return: the same collection ordered by ascending\r\n\r\n    Examples:\r\n    &gt;&gt;&gt; sort([4, 2, 6, 8, 1, 7, 8, 22, 14, 56, 27, 79, 23, 45, 14, 12])\r\n    [1, 2, 4, 6, 7, 8, 8, 12, 14, 14, 22, 23, 27, 45, 56, 79]\r\n\r\n    &gt;&gt;&gt; sort([-1, -5, -3, -13, -44])\r\n    [-44, -13, -5, -3, -1]\r\n\r\n    &gt;&gt;&gt; sort([])\r\n    []\r\n\r\n    &gt;&gt;&gt; sort([5])\r\n    [5]\r\n\r\n    &gt;&gt;&gt; sort([-3, 0, -7, 6, 23, -34])\r\n    [-34, -7, -3, 0, 6, 23]\r\n\r\n    &gt;&gt;&gt; sort([1.7, 1.0, 3.3, 2.1, 0.3 ])\r\n    [0.3, 1.0, 1.7, 2.1, 3.3]\r\n\r\n    &gt;&gt;&gt; sort([&#x27;d&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;e&#x27;, &#x27;c&#x27;])\r\n    [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;]\r\n    &quot;&quot;&quot;</span>\r\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">len</span>(array) == <span class=\"hljs-number\">0</span>:\r\n        <span class=\"hljs-keyword\">return</span> array\r\n    max_depth = <span class=\"hljs-number\">2</span> * math.ceil(math.log2(<span class=\"hljs-built_in\">len</span>(array)))\r\n    size_threshold = <span class=\"hljs-number\">16</span>\r\n    <span class=\"hljs-keyword\">return</span> intro_sort(array, <span class=\"hljs-number\">0</span>, <span class=\"hljs-built_in\">len</span>(array), size_threshold, max_depth)\r\n\r\n\r\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">intro_sort</span>(<span class=\"hljs-params\">\r\n    array: <span class=\"hljs-built_in\">list</span>, start: <span class=\"hljs-built_in\">int</span>, end: <span class=\"hljs-built_in\">int</span>, size_threshold: <span class=\"hljs-built_in\">int</span>, max_depth: <span class=\"hljs-built_in\">int</span>\r\n</span>) -&gt; <span class=\"hljs-built_in\">list</span>:\r\n    <span class=\"hljs-string\">&quot;&quot;&quot;\r\n    &gt;&gt;&gt; array = [4, 2, 6, 8, 1, 7, 8, 22, 14, 56, 27, 79, 23, 45, 14, 12]\r\n\r\n    &gt;&gt;&gt; max_depth = 2 * math.ceil(math.log2(len(array)))\r\n\r\n    &gt;&gt;&gt; intro_sort(array, 0, len(array), 16, max_depth)\r\n    [1, 2, 4, 6, 7, 8, 8, 12, 14, 14, 22, 23, 27, 45, 56, 79]\r\n    &quot;&quot;&quot;</span>\r\n    <span class=\"hljs-keyword\">while</span> end - start &gt; size_threshold:\r\n        <span class=\"hljs-keyword\">if</span> max_depth == <span class=\"hljs-number\">0</span>:\r\n            <span class=\"hljs-keyword\">return</span> heap_sort(array)\r\n        max_depth -= <span class=\"hljs-number\">1</span>\r\n        pivot = median_of_3(array, start, start + ((end - start) // <span class=\"hljs-number\">2</span>) + <span class=\"hljs-number\">1</span>, end - <span class=\"hljs-number\">1</span>)\r\n        p = partition(array, start, end, pivot)\r\n        intro_sort(array, p, end, size_threshold, max_depth)\r\n        end = p\r\n    <span class=\"hljs-keyword\">return</span> insertion_sort(array, start, end)\r\n\r\n\r\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\r\n    <span class=\"hljs-keyword\">import</span> doctest\r\n\r\n    doctest.testmod()\r\n\r\n    user_input = <span class=\"hljs-built_in\">input</span>(<span class=\"hljs-string\">&quot;Enter numbers separated by a comma : &quot;</span>).strip()\r\n    unsorted = [<span class=\"hljs-built_in\">float</span>(item) <span class=\"hljs-keyword\">for</span> item <span class=\"hljs-keyword\">in</span> user_input.split(<span class=\"hljs-string\">&quot;,&quot;</span>)]\r\n    <span class=\"hljs-built_in\">print</span>(sort(unsorted))\r\n"
    },
    "javascript": {
      "dir": "Sorts\\IntroSort.js",
      "url": "https://github.com/TheAlgorithms/javascript/tree/master/Sorts\\IntroSort.js",
      "code": "<span class=\"hljs-comment\">/**\r\n * <span class=\"hljs-doctag\">@function</span> Intosort (As implemented in STD C++ Lib)\r\n * The function performs introsort which is used in\r\n * C++ Standard LIbrary, the implementation is inspired from]\r\n * library routine itself.\r\n * ALGORITHM:\r\n * 1) It performs quicksort on array until the recursion depth\r\n *    exceeds a pre determined limit.\r\n * 2) If the limit is reached it switches to heapsort\r\n * 3) For array size less than a threshold(16) directly\r\n *    does insertion sort on array\r\n * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Array</span>} array the array to be sorted\r\n * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Function</span>} compare the comparison function\r\n *\r\n * <span class=\"hljs-doctag\">@see</span> [Introsort](https://en.wikipedia.org/wiki/Introsort)\r\n * <span class=\"hljs-doctag\">@author</span> [Lakhan Nad](https://github.com/Lakhan-Nad)\r\n */</span>\r\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">introsort</span> (array, compare) {\r\n  <span class=\"hljs-comment\">/**\r\n   * <span class=\"hljs-doctag\">@function</span> Default Comparison Function\r\n   * This function is same as implemented by\r\n   * Array.sort method\r\n   * <span class=\"hljs-doctag\">@see</span> [StackOverflow](https://stackoverflow.com/questions/47334234/how-to-implement-array-prototype-sort-default-compare-function)\r\n   * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">*</span>} a variable 1\r\n   * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">*</span>} b variable 2\r\n   * <span class=\"hljs-doctag\">@returns</span> {<span class=\"hljs-type\">Number</span>}\r\n   * -1 if a is less than b\r\n   *  0 if a is equal to b\r\n   *  1 if a greater than b\r\n   */</span>\r\n  <span class=\"hljs-keyword\">const</span> defaultComparator = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">x, y</span>) {\r\n    <span class=\"hljs-keyword\">if</span> (x === <span class=\"hljs-literal\">undefined</span> &amp;&amp; y === <span class=\"hljs-literal\">undefined</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>\r\n    <span class=\"hljs-keyword\">if</span> (x === <span class=\"hljs-literal\">undefined</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span>\r\n    <span class=\"hljs-keyword\">if</span> (y === <span class=\"hljs-literal\">undefined</span>) <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">1</span>\r\n    <span class=\"hljs-keyword\">const</span> xString = <span class=\"hljs-title function_\">toString</span>(x)\r\n    <span class=\"hljs-keyword\">const</span> yString = <span class=\"hljs-title function_\">toString</span>(y)\r\n    <span class=\"hljs-keyword\">if</span> (xString &lt; yString) <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">1</span>\r\n    <span class=\"hljs-keyword\">if</span> (xString &gt; yString) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span>\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>\r\n  }\r\n  <span class=\"hljs-comment\">/**\r\n   * <span class=\"hljs-doctag\">@function</span> helper function for defaultComparator\r\n   * Converts a given object to String\r\n   * <span class=\"hljs-doctag\">@throws</span> TypeError()\r\n   * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Object</span>} <span class=\"hljs-variable\">obj</span>\r\n   * <span class=\"hljs-doctag\">@returns</span> {<span class=\"hljs-type\">String</span>} String representation of given object\r\n   */</span>\r\n  <span class=\"hljs-keyword\">const</span> toString = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">obj</span>) {\r\n    <span class=\"hljs-keyword\">if</span> (obj === <span class=\"hljs-literal\">null</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;null&#x27;</span>\r\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> obj === <span class=\"hljs-string\">&#x27;boolean&#x27;</span> || <span class=\"hljs-keyword\">typeof</span> obj === <span class=\"hljs-string\">&#x27;number&#x27;</span>) {\r\n      <span class=\"hljs-keyword\">return</span> obj.<span class=\"hljs-title function_\">toString</span>()\r\n    }\r\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> obj === <span class=\"hljs-string\">&#x27;string&#x27;</span>) <span class=\"hljs-keyword\">return</span> obj\r\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> obj === <span class=\"hljs-string\">&#x27;symbol&#x27;</span>) <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>()\r\n    <span class=\"hljs-keyword\">return</span> obj.<span class=\"hljs-title function_\">toString</span>()\r\n  }\r\n  <span class=\"hljs-comment\">/**\r\n   * Checks if the value passed is an array\r\n   * or not\r\n   */</span>\r\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(array) === <span class=\"hljs-literal\">false</span>) {\r\n    <span class=\"hljs-keyword\">return</span>\r\n  }\r\n  <span class=\"hljs-comment\">/**\r\n   * If the compare parameter is not a function\r\n   * or not passed at all use default comparator\r\n   * function\r\n   */</span>\r\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> compare !== <span class=\"hljs-string\">&#x27;function&#x27;</span>) {\r\n    compare = defaultComparator <span class=\"hljs-comment\">// If compare is not a comparator function</span>\r\n  }\r\n  <span class=\"hljs-comment\">/**\r\n   * Use a closure to define the whole sort\r\n   * implementation this is done through\r\n   * [IIFE](https://en.wikipedia.org/wiki/Immediately_invoked_function_expression)\r\n   */</span>\r\n  <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">array, comparator</span>) {\r\n    <span class=\"hljs-keyword\">const</span> swap = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">index1, index2</span>) {\r\n      <span class=\"hljs-keyword\">const</span> temp = array[index1]\r\n      array[index1] = array[index2]\r\n      array[index2] = temp\r\n    }\r\n    <span class=\"hljs-comment\">/**\r\n     * <span class=\"hljs-doctag\">@constant</span> <span class=\"hljs-variable\">THRESHOLD</span>\r\n     * If the length of array is less than\r\n     * this then we simply perform insertion sort\r\n     */</span>\r\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">THRESHOLD</span> = <span class=\"hljs-number\">16</span>\r\n    <span class=\"hljs-comment\">/**\r\n     * <span class=\"hljs-doctag\">@constant</span> <span class=\"hljs-variable\">TUNEMAXDEPTH</span>\r\n     * Constant usec to increase or decrease value\r\n     * of maxDepth\r\n     */</span>\r\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">TUNEMAXDEPTH</span> = <span class=\"hljs-number\">1</span>\r\n    <span class=\"hljs-keyword\">const</span> len = array.<span class=\"hljs-property\">length</span>\r\n    <span class=\"hljs-comment\">/**\r\n     * Return if array is only of length 1\r\n     * Array of size 1 is always sorted\r\n     */</span>\r\n    <span class=\"hljs-keyword\">if</span> (len === <span class=\"hljs-number\">1</span>) {\r\n      <span class=\"hljs-keyword\">return</span>\r\n    }\r\n    <span class=\"hljs-comment\">/**\r\n     * Calculate maxDepth = log2(len)\r\n     * Taken from implementation in stdc++\r\n     */</span>\r\n    <span class=\"hljs-keyword\">const</span> maxDepth = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">log2</span>(len)) * <span class=\"hljs-variable constant_\">TUNEMAXDEPTH</span>\r\n    <span class=\"hljs-comment\">/**\r\n     * The very first call to quicksort\r\n     * this initiates sort routine\r\n     */</span>\r\n    <span class=\"hljs-title function_\">quickSort</span>(<span class=\"hljs-number\">0</span>, len, maxDepth)\r\n    <span class=\"hljs-comment\">/**\r\n     * A final check call to insertion sort\r\n     * on sorted array\r\n     */</span>\r\n    <span class=\"hljs-title function_\">insertionSort</span>(<span class=\"hljs-number\">0</span>, len)\r\n    <span class=\"hljs-comment\">/** *********************  Implementation of various routines  **************************/</span>\r\n    <span class=\"hljs-comment\">/**\r\n     * <span class=\"hljs-doctag\">@function</span>\r\n     * This is recursive quicksort implementation in array\r\n     * of segment [start,last-1]\r\n     * [QuickSort](https://en.wikipedia.org/wiki/Quicksort)\r\n     * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Number</span>} start the start index of array segment to be sorted\r\n     * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Number</span>} last  one more than the last index of array segment\r\n     * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Number</span>} depth this measures how many recursive calls are done\r\n     */</span>\r\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">quickSort</span> (start, last, depth) {\r\n      <span class=\"hljs-keyword\">if</span> (last - start &lt;= <span class=\"hljs-variable constant_\">THRESHOLD</span>) {\r\n        <span class=\"hljs-title function_\">insertionSort</span>(start, last)\r\n        <span class=\"hljs-keyword\">return</span>\r\n      } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (depth &lt;= <span class=\"hljs-number\">0</span>) {\r\n        <span class=\"hljs-title function_\">heapSort</span>(start, last)\r\n        <span class=\"hljs-keyword\">return</span>\r\n      }\r\n      <span class=\"hljs-keyword\">let</span> pivot = (last + start) &gt;&gt; <span class=\"hljs-number\">1</span>\r\n      pivot = <span class=\"hljs-title function_\">partition</span>(start, last, pivot)\r\n      <span class=\"hljs-title function_\">quickSort</span>(start, pivot, depth - <span class=\"hljs-number\">1</span>)\r\n      <span class=\"hljs-title function_\">quickSort</span>(pivot + <span class=\"hljs-number\">1</span>, last, depth - <span class=\"hljs-number\">1</span>)\r\n    }\r\n    <span class=\"hljs-comment\">/**\r\n     * <span class=\"hljs-doctag\">@function</span> Helper function to quicksort\r\n     * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Number</span>} start the start of array segment to partition\r\n     * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Number</span>} last  one more than last index of the array segment\r\n     * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Number</span>} pivot the index of pivot to be used\r\n     * <span class=\"hljs-doctag\">@returns</span> {<span class=\"hljs-type\">Number</span>} the index of pivot after partition\r\n     */</span>\r\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">partition</span> (start, last, pivot) {\r\n      <span class=\"hljs-title function_\">swap</span>(start, pivot)\r\n      pivot = start\r\n      <span class=\"hljs-keyword\">let</span> lo = start\r\n      <span class=\"hljs-keyword\">let</span> hi = last\r\n      <span class=\"hljs-keyword\">while</span> (<span class=\"hljs-literal\">true</span>) {\r\n        lo++\r\n        <span class=\"hljs-keyword\">while</span> (<span class=\"hljs-title function_\">comparator</span>(array[lo], array[pivot]) &lt;= <span class=\"hljs-number\">0</span> &amp;&amp; lo !== last) {\r\n          lo++\r\n        }\r\n        hi--\r\n        <span class=\"hljs-keyword\">while</span> (<span class=\"hljs-title function_\">comparator</span>(array[hi], array[pivot]) &gt; <span class=\"hljs-number\">0</span> &amp;&amp; hi !== start) {\r\n          hi--\r\n        }\r\n        <span class=\"hljs-keyword\">if</span> (lo &gt;= hi) {\r\n          <span class=\"hljs-keyword\">break</span>\r\n        }\r\n        <span class=\"hljs-title function_\">swap</span>(lo, hi)\r\n      }\r\n      <span class=\"hljs-title function_\">swap</span>(start, hi)\r\n      <span class=\"hljs-keyword\">return</span> hi\r\n    }\r\n    <span class=\"hljs-comment\">/**\r\n     * <span class=\"hljs-doctag\">@function</span>\r\n     * Performs insertion sort on array of range\r\n     * [start, last-1]\r\n     * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Number</span>} start the first index of array segment to be sorted\r\n     * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Number</span>} last  one more than last index of array to be sorted\r\n     */</span>\r\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">insertionSort</span> (start, last) {\r\n      <span class=\"hljs-keyword\">let</span> i, j\r\n      <span class=\"hljs-keyword\">for</span> (i = start + <span class=\"hljs-number\">1</span>; i &lt; last; i++) {\r\n        j = i - <span class=\"hljs-number\">1</span>\r\n        <span class=\"hljs-keyword\">while</span> (j &gt;= <span class=\"hljs-number\">0</span> &amp;&amp; <span class=\"hljs-title function_\">comparator</span>(array[j], array[j + <span class=\"hljs-number\">1</span>]) &gt; <span class=\"hljs-number\">0</span>) {\r\n          <span class=\"hljs-title function_\">swap</span>(j, j + <span class=\"hljs-number\">1</span>)\r\n          j--\r\n        }\r\n      }\r\n    }\r\n    <span class=\"hljs-comment\">/**\r\n     * <span class=\"hljs-doctag\">@function</span>\r\n     * Performs heapsort in array segment of range [start, last-1]\r\n     * [HeapSort](https://en.wikipedia.org/wiki/Heapsort)\r\n     * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Number</span>} start the first index of array segment to be sorted\r\n     * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Number</span>} last  one more than last index of array to be sorted\r\n     */</span>\r\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">heapSort</span> (start, last) {\r\n      <span class=\"hljs-keyword\">let</span> x = (last + start) &gt;&gt; <span class=\"hljs-number\">1</span>\r\n      <span class=\"hljs-keyword\">while</span> (x - start &gt;= <span class=\"hljs-number\">0</span>) {\r\n        <span class=\"hljs-title function_\">heapify</span>(x, start, last)\r\n        x--\r\n      }\r\n      x = last - <span class=\"hljs-number\">1</span>\r\n      <span class=\"hljs-keyword\">while</span> (x - start &gt; <span class=\"hljs-number\">0</span>) {\r\n        <span class=\"hljs-title function_\">swap</span>(start, x)\r\n        <span class=\"hljs-title function_\">heapify</span>(start, start, x)\r\n        x--\r\n      }\r\n    }\r\n    <span class=\"hljs-comment\">/**\r\n     * <span class=\"hljs-doctag\">@function</span> Helper function to heapsort routine\r\n     * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Number</span>} cur the index we need to heapify\r\n     * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Number</span>} start the start index of array segment that cur belongs to\r\n     * <span class=\"hljs-doctag\">@param</span> {<span class=\"hljs-type\">Number</span>} last  one more than last index of segment that cur belongs to\r\n     */</span>\r\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">heapify</span> (cur, start, last) {\r\n      <span class=\"hljs-keyword\">const</span> size = last - start\r\n      <span class=\"hljs-keyword\">let</span> max, lt, rt\r\n      cur = cur - start\r\n      <span class=\"hljs-keyword\">while</span> (<span class=\"hljs-literal\">true</span>) {\r\n        max = cur\r\n        lt = <span class=\"hljs-number\">2</span> * max + <span class=\"hljs-number\">1</span>\r\n        rt = <span class=\"hljs-number\">2</span> * max + <span class=\"hljs-number\">2</span>\r\n        <span class=\"hljs-keyword\">if</span> (\r\n          lt &lt; size &amp;&amp;\r\n          <span class=\"hljs-title function_\">comparator</span>(array[start + max], array[start + lt]) &lt; <span class=\"hljs-number\">0</span>\r\n        ) {\r\n          max = lt\r\n        }\r\n        <span class=\"hljs-keyword\">if</span> (\r\n          rt &lt; size &amp;&amp;\r\n          <span class=\"hljs-title function_\">comparator</span>(array[start + max], array[start + rt]) &lt; <span class=\"hljs-number\">0</span>\r\n        ) {\r\n          max = rt\r\n        }\r\n        <span class=\"hljs-keyword\">if</span> (max !== cur) {\r\n          <span class=\"hljs-title function_\">swap</span>(start + cur, start + max)\r\n          cur = max\r\n        } <span class=\"hljs-keyword\">else</span> {\r\n          <span class=\"hljs-keyword\">break</span>\r\n        }\r\n      }\r\n    }\r\n  })(array, compare)\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * <span class=\"hljs-doctag\">@example</span> Demo run of the sort routine\r\n * The data is randomly generated\r\n * Returns &#x27;RIGHT:)&#x27; if the sort routine worked as expected,\r\n *         &#x27;WRONG!!&#x27; otherwise\r\n */</span>\r\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">demo1</span> () {\r\n  <span class=\"hljs-keyword\">const</span> data = []\r\n  <span class=\"hljs-keyword\">const</span> size = <span class=\"hljs-number\">1000000</span>\r\n  <span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>\r\n  <span class=\"hljs-keyword\">let</span> temp\r\n  <span class=\"hljs-keyword\">const</span> c = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">a, b</span>) {\r\n    <span class=\"hljs-keyword\">return</span> a - b\r\n  }\r\n  <span class=\"hljs-keyword\">for</span> (i = <span class=\"hljs-number\">0</span>; i &lt; size; i++) {\r\n    temp = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>() * <span class=\"hljs-title class_\">Number</span>.<span class=\"hljs-property\">MAX_SAFE_INTEGER</span>\r\n    data.<span class=\"hljs-title function_\">push</span>(temp)\r\n  }\r\n  <span class=\"hljs-title function_\">introsort</span>(data, c)\r\n  <span class=\"hljs-keyword\">let</span> faulty = <span class=\"hljs-literal\">false</span>\r\n  <span class=\"hljs-keyword\">for</span> (i = <span class=\"hljs-number\">1</span>; i &lt; size; i++) {\r\n    <span class=\"hljs-keyword\">if</span> (data[i] &lt; data[i - <span class=\"hljs-number\">1</span>]) {\r\n      faulty = <span class=\"hljs-literal\">true</span>\r\n      <span class=\"hljs-keyword\">break</span>\r\n    }\r\n  }\r\n  <span class=\"hljs-keyword\">if</span> (faulty) {\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;WRONG!!&#x27;</span>\r\n  } <span class=\"hljs-keyword\">else</span> {\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;RIGHT:)&#x27;</span>\r\n  }\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * <span class=\"hljs-doctag\">@example</span> Demo run of the sort routine\r\n * using the default compare function and\r\n * comparing the results with Array.sort\r\n */</span>\r\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">demo2</span> () {\r\n  <span class=\"hljs-keyword\">const</span> data = []\r\n  <span class=\"hljs-keyword\">const</span> data2 = []\r\n  <span class=\"hljs-keyword\">const</span> size = <span class=\"hljs-number\">1000000</span>\r\n  <span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>\r\n  <span class=\"hljs-keyword\">let</span> temp\r\n  <span class=\"hljs-keyword\">for</span> (i = <span class=\"hljs-number\">0</span>; i &lt; size; i++) {\r\n    temp = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>() * <span class=\"hljs-title class_\">Number</span>.<span class=\"hljs-property\">MAX_SAFE_INTEGER</span>\r\n    data.<span class=\"hljs-title function_\">push</span>(temp)\r\n    data2.<span class=\"hljs-title function_\">push</span>(temp)\r\n  }\r\n  <span class=\"hljs-title function_\">introsort</span>(data)\r\n  data2.<span class=\"hljs-title function_\">sort</span>()\r\n  <span class=\"hljs-keyword\">let</span> faulty = <span class=\"hljs-literal\">false</span>\r\n  <span class=\"hljs-keyword\">for</span> (i = <span class=\"hljs-number\">1</span>; i &lt; size; i++) {\r\n    <span class=\"hljs-keyword\">if</span> (data[i] !== data2[i]) {\r\n      faulty = <span class=\"hljs-literal\">true</span>\r\n      <span class=\"hljs-keyword\">break</span>\r\n    }\r\n  }\r\n  <span class=\"hljs-keyword\">if</span> (faulty) {\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;WRONG Implemented Comparator!!&#x27;</span>\r\n  } <span class=\"hljs-keyword\">else</span> {\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Comparator Works Fine:)&#x27;</span>\r\n  }\r\n}\r\n\r\n<span class=\"hljs-keyword\">export</span> { introsort, demo1, demo2 }\r\n"
    }
  },
  "contributors": [
    {
      "name": "lakhan_nad",
      "email": "lakhannad1999@gmail.com",
      "commits": 1
    },
    {
      "name": "Rak Laptudirm",
      "email": "raklaptudirm@gmail.com",
      "commits": 1
    },
    {
      "name": "Eric Lavault",
      "email": "39483232+lvlte@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Keshav Bohra",
      "email": "keshav2016@gmail.com",
      "commits": 1
    },
    {
      "name": "YeonJeongLee00",
      "email": "67946956+YeonJeongLee00@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Rak Laptudirm",
      "email": "68542775+raklaptudirm@users.noreply.github.com",
      "commits": 2
    }
  ],
  "explanationUrl": {}
}