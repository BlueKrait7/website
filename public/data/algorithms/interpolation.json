{
  "slug": "interpolation",
  "name": "Interpolation",
  "categories": [
    "searches"
  ],
  "body": {},
  "implementations": {
    "go": {
      "dir": "search\\interpolation.go",
      "url": "https://github.com/TheAlgorithms/go/tree/master/search\\interpolation.go",
      "code": "<span class=\"hljs-keyword\">package</span> search\r\n\r\n<span class=\"hljs-comment\">// Interpolation searches for the entity in the given sortedData.</span>\r\n<span class=\"hljs-comment\">// if the entity is present, it will return the index of the entity, if not -1 will be returned.</span>\r\n<span class=\"hljs-comment\">// see: https://en.wikipedia.org/wiki/Interpolation_search</span>\r\n<span class=\"hljs-comment\">// Complexity</span>\r\n<span class=\"hljs-comment\">// \t\tWorst: O(N)</span>\r\n<span class=\"hljs-comment\">// \t\tAverage: O(log(log(N))  if the elements are uniformly distributed</span>\r\n<span class=\"hljs-comment\">// \t\tBest: O(1)</span>\r\n<span class=\"hljs-comment\">// Example</span>\r\n<span class=\"hljs-comment\">// \t\tfmt.Println(InterpolationSearch([]int{1, 2, 9, 20, 31, 45, 63, 70, 100},100))</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">Interpolation</span><span class=\"hljs-params\">(sortedData []<span class=\"hljs-type\">int</span>, guess <span class=\"hljs-type\">int</span>)</span></span> (<span class=\"hljs-type\">int</span>, <span class=\"hljs-type\">error</span>) {\r\n\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">len</span>(sortedData) == <span class=\"hljs-number\">0</span> {\r\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">-1</span>, ErrNotFound\r\n\t}\r\n\r\n\t<span class=\"hljs-keyword\">var</span> (\r\n\t\tlow, high       = <span class=\"hljs-number\">0</span>, <span class=\"hljs-built_in\">len</span>(sortedData) - <span class=\"hljs-number\">1</span>\r\n\t\tlowVal, highVal = sortedData[low], sortedData[high]\r\n\t)\r\n\r\n\t<span class=\"hljs-keyword\">for</span> lowVal != highVal &amp;&amp; (lowVal &lt;= guess) &amp;&amp; (guess &lt;= highVal) {\r\n\t\tmid := low + <span class=\"hljs-type\">int</span>(<span class=\"hljs-type\">float64</span>(<span class=\"hljs-type\">float64</span>((guess-lowVal)*(high-low))/<span class=\"hljs-type\">float64</span>(highVal-lowVal)))\r\n\r\n\t\t<span class=\"hljs-comment\">// if guess is found, array can also have duplicate values, so scan backwards and find the first index</span>\r\n\t\t<span class=\"hljs-keyword\">if</span> sortedData[mid] == guess {\r\n\t\t\t<span class=\"hljs-keyword\">for</span> mid &gt; <span class=\"hljs-number\">0</span> &amp;&amp; sortedData[mid<span class=\"hljs-number\">-1</span>] == guess {\r\n\t\t\t\tmid--\r\n\t\t\t}\r\n\t\t\t<span class=\"hljs-keyword\">return</span> mid, <span class=\"hljs-literal\">nil</span>\r\n\r\n\t\t}\r\n\r\n\t\t<span class=\"hljs-comment\">// adjust our guess and continue</span>\r\n\t\t<span class=\"hljs-keyword\">if</span> sortedData[mid] &gt; guess {\r\n\t\t\thigh, highVal = mid<span class=\"hljs-number\">-1</span>, sortedData[high]\r\n\r\n\t\t} <span class=\"hljs-keyword\">else</span> {\r\n\t\t\tlow, lowVal = mid+<span class=\"hljs-number\">1</span>, sortedData[low]\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t<span class=\"hljs-keyword\">if</span> guess == lowVal {\r\n\t\t<span class=\"hljs-keyword\">return</span> low, <span class=\"hljs-literal\">nil</span>\r\n\t}\r\n\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">-1</span>, ErrNotFound\r\n}\r\n"
    },
    "aarch64_assembly": {
      "dir": "string\\interpolation.s",
      "url": "https://github.com/TheAlgorithms/aarch64_assembly/tree/master/string\\interpolation.s",
      "code": "<span class=\"hljs-comment\">/* ARM assembly AARCH64 Raspberry PI 3B */</span>\r\n<span class=\"hljs-comment\">/*  program insertString64.s   */</span>\r\n<span class=\"hljs-comment\">/* In assembler, there is no function to insert a chain */</span>\r\n<span class=\"hljs-comment\">/* so this program offers two functions to insert    */</span>\r\n<span class=\"hljs-comment\">/*******************************************/</span>\r\n<span class=\"hljs-comment\">/* Constantes file                         */</span>\r\n<span class=\"hljs-comment\">/*******************************************/</span>\r\n<span class=\"hljs-comment\">/* for this file see task include a file in language AArch64 assembly*/</span>\r\n<span class=\"hljs-symbol\">.include</span> <span class=\"hljs-string\">&quot;../includeConstantesARM64.inc&quot;</span>\r\n \r\n<span class=\"hljs-symbol\">.equ</span> CHARPOS,       <span class=\"hljs-string\">&#x27;@&#x27;</span>\r\n \r\n<span class=\"hljs-comment\">/*******************************************/</span>\r\n<span class=\"hljs-comment\">/* Initialized data                        */</span>\r\n<span class=\"hljs-comment\">/*******************************************/</span>\r\n<span class=\"hljs-symbol\">.data</span>\r\n<span class=\"hljs-symbol\">szString:</span>           <span class=\"hljs-meta\">.asciz</span> <span class=\"hljs-string\">&quot; string &quot;</span>\r\n<span class=\"hljs-symbol\">szString1:</span>          <span class=\"hljs-meta\">.asciz</span> <span class=\"hljs-string\">&quot;insert&quot;</span>\r\n<span class=\"hljs-symbol\">szString2:</span>          <span class=\"hljs-meta\">.asciz</span> <span class=\"hljs-string\">&quot;abcd@efg&quot;</span>\r\n<span class=\"hljs-symbol\">szString3:</span>          <span class=\"hljs-meta\">.asciz</span> <span class=\"hljs-string\">&quot;abcdef @&quot;</span>\r\n<span class=\"hljs-symbol\">szString4:</span>          <span class=\"hljs-meta\">.asciz</span> <span class=\"hljs-string\">&quot;@ abcdef&quot;</span>\r\n<span class=\"hljs-symbol\">szCarriageReturn:</span>   <span class=\"hljs-meta\">.asciz</span> <span class=\"hljs-string\">&quot;\\n&quot;</span>\r\n<span class=\"hljs-comment\">/*******************************************/</span>\r\n<span class=\"hljs-comment\">/* UnInitialized data                      */</span>\r\n<span class=\"hljs-comment\">/*******************************************/</span>\r\n<span class=\"hljs-symbol\">.bss</span> \r\n<span class=\"hljs-comment\">/*******************************************/</span>\r\n<span class=\"hljs-comment\">/*  code section                           */</span>\r\n<span class=\"hljs-comment\">/*******************************************/</span>\r\n<span class=\"hljs-symbol\">.text</span>\r\n<span class=\"hljs-symbol\">.global</span> main \r\n<span class=\"hljs-symbol\">main:</span>                            <span class=\"hljs-comment\">// entry of program</span>\r\n \r\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszString          <span class=\"hljs-comment\">// string address</span>\r\n    <span class=\"hljs-keyword\">ldr</span> x1,qAdrszString1         <span class=\"hljs-comment\">// string address</span>\r\n    <span class=\"hljs-keyword\">mov</span> x2,<span class=\"hljs-number\">#0</span>\r\n    <span class=\"hljs-keyword\">bl</span> strInsert                 <span class=\"hljs-comment\">// </span>\r\n                                 <span class=\"hljs-comment\">// return new pointer</span>\r\n    <span class=\"hljs-keyword\">bl</span> affichageMess             <span class=\"hljs-comment\">// display result string</span>\r\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszCarriageReturn\r\n    <span class=\"hljs-keyword\">bl</span> affichageMess\r\n \r\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszString          <span class=\"hljs-comment\">// string address</span>\r\n    <span class=\"hljs-keyword\">ldr</span> x1,qAdrszString1         <span class=\"hljs-comment\">// string address</span>\r\n    <span class=\"hljs-keyword\">mov</span> x2,<span class=\"hljs-number\">#3</span>\r\n    <span class=\"hljs-keyword\">bl</span> strInsert                 <span class=\"hljs-comment\">// </span>\r\n                                 <span class=\"hljs-comment\">// return new pointer</span>\r\n    <span class=\"hljs-keyword\">bl</span> affichageMess             <span class=\"hljs-comment\">// display result string</span>\r\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszCarriageReturn\r\n    <span class=\"hljs-keyword\">bl</span> affichageMess\r\n \r\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszString          <span class=\"hljs-comment\">// string address</span>\r\n    <span class=\"hljs-keyword\">ldr</span> x1,qAdrszString1         <span class=\"hljs-comment\">// string address</span>\r\n    <span class=\"hljs-keyword\">mov</span> x2,<span class=\"hljs-number\">#40</span>\r\n    <span class=\"hljs-keyword\">bl</span> strInsert                 <span class=\"hljs-comment\">// </span>\r\n                                 <span class=\"hljs-comment\">// return new pointer</span>\r\n    <span class=\"hljs-keyword\">bl</span> affichageMess             <span class=\"hljs-comment\">// display result string</span>\r\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszCarriageReturn\r\n    <span class=\"hljs-keyword\">bl</span> affichageMess\r\n \r\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszString2         <span class=\"hljs-comment\">// string address</span>\r\n    <span class=\"hljs-keyword\">ldr</span> x1,qAdrszString1         <span class=\"hljs-comment\">// string address</span>\r\n    <span class=\"hljs-keyword\">bl</span> strInsertAtChar           <span class=\"hljs-comment\">// </span>\r\n                                 <span class=\"hljs-comment\">// return new pointer</span>\r\n    <span class=\"hljs-keyword\">bl</span> affichageMess             <span class=\"hljs-comment\">// display result string</span>\r\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszCarriageReturn\r\n    <span class=\"hljs-keyword\">bl</span> affichageMess\r\n \r\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszString3         <span class=\"hljs-comment\">// string address</span>\r\n    <span class=\"hljs-keyword\">ldr</span> x1,qAdrszString1         <span class=\"hljs-comment\">// string address</span>\r\n    <span class=\"hljs-keyword\">bl</span> strInsertAtChar           <span class=\"hljs-comment\">// </span>\r\n                                 <span class=\"hljs-comment\">// return new pointer</span>\r\n    <span class=\"hljs-keyword\">bl</span> affichageMess             <span class=\"hljs-comment\">// display result string</span>\r\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszCarriageReturn\r\n    <span class=\"hljs-keyword\">bl</span> affichageMess\r\n \r\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszString4         <span class=\"hljs-comment\">// string address</span>\r\n    <span class=\"hljs-keyword\">ldr</span> x1,qAdrszString1         <span class=\"hljs-comment\">// string address</span>\r\n    <span class=\"hljs-keyword\">bl</span> strInsertAtChar           <span class=\"hljs-comment\">// </span>\r\n                                 <span class=\"hljs-comment\">// return new pointer</span>\r\n    <span class=\"hljs-keyword\">bl</span> affichageMess             <span class=\"hljs-comment\">// display result string</span>\r\n    <span class=\"hljs-keyword\">ldr</span> x0,qAdrszCarriageReturn\r\n    <span class=\"hljs-keyword\">bl</span> affichageMess\r\n<span class=\"hljs-number\">100</span>:                             <span class=\"hljs-comment\">// standard end of the program</span>\r\n    <span class=\"hljs-keyword\">mov</span> x0, <span class=\"hljs-number\">#0</span>                   <span class=\"hljs-comment\">// return code</span>\r\n    <span class=\"hljs-keyword\">mov</span> x8, <span class=\"hljs-symbol\">#EXIT</span>                <span class=\"hljs-comment\">// request to exit program</span>\r\n    <span class=\"hljs-keyword\">svc</span> <span class=\"hljs-number\">0</span>                        <span class=\"hljs-comment\">// perform the system call</span>\r\n<span class=\"hljs-symbol\">qAdrszString:</span>          .quad szString\r\n<span class=\"hljs-symbol\">qAdrszString1:</span>         .quad szString1\r\n<span class=\"hljs-symbol\">qAdrszString2:</span>         .quad szString2\r\n<span class=\"hljs-symbol\">qAdrszString3:</span>         .quad szString3\r\n<span class=\"hljs-symbol\">qAdrszString4:</span>         .quad szString4\r\n<span class=\"hljs-symbol\">qAdrszCarriageReturn:</span>  .quad szCarriageReturn\r\n<span class=\"hljs-comment\">/******************************************************************/</span>\r\n<span class=\"hljs-comment\">/*   insertion of a sub-chain in a chain in the desired position  */</span> \r\n<span class=\"hljs-comment\">/******************************************************************/</span>\r\n<span class=\"hljs-comment\">/* x0 contains the address of string 1 */</span>\r\n<span class=\"hljs-comment\">/* x1 contains the address of string to insert */</span>\r\n<span class=\"hljs-comment\">/* x2 contains the position of insertion : \r\n      0 start string \r\n      if x2 &gt; lenght string 1 insert at end of string*/</span>\r\n<span class=\"hljs-comment\">/* x0 return the address of new string  on the heap */</span>\r\n<span class=\"hljs-symbol\">strInsert:</span>\r\n    stp x1,<span class=\"hljs-built_in\">lr</span>,[<span class=\"hljs-built_in\">sp</span>,-<span class=\"hljs-number\">16</span>]!                      <span class=\"hljs-comment\">// save  registers</span>\r\n    stp x2,x3,[<span class=\"hljs-built_in\">sp</span>,-<span class=\"hljs-number\">16</span>]!                      <span class=\"hljs-comment\">// save  registers</span>\r\n    <span class=\"hljs-keyword\">mov</span> x3,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// length counter </span>\r\n<span class=\"hljs-number\">1</span>:                                           <span class=\"hljs-comment\">// compute length of string 1</span>\r\n    <span class=\"hljs-keyword\">ldrb</span> w4,[x0,x3]\r\n    <span class=\"hljs-keyword\">cmp</span> w4,<span class=\"hljs-number\">#0</span>\r\n    cinc  x3,x3,ne                           <span class=\"hljs-comment\">// increment to one if not equal</span>\r\n    <span class=\"hljs-keyword\">bne</span> <span class=\"hljs-number\">1</span>b                                   <span class=\"hljs-comment\">// loop if not equal</span>\r\n    <span class=\"hljs-keyword\">mov</span> x5,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// length counter insertion string</span>\r\n<span class=\"hljs-number\">2</span>:                                           <span class=\"hljs-comment\">// compute length of insertion string</span>\r\n    <span class=\"hljs-keyword\">ldrb</span> w4,[x1,x5]\r\n    <span class=\"hljs-keyword\">cmp</span> x4,<span class=\"hljs-number\">#0</span>\r\n    cinc  x5,x5,ne                           <span class=\"hljs-comment\">// increment to one if not equal</span>\r\n    <span class=\"hljs-keyword\">bne</span> <span class=\"hljs-number\">2</span>b\r\n    <span class=\"hljs-keyword\">cmp</span> x5,<span class=\"hljs-number\">#0</span>\r\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">99</span>f                                  <span class=\"hljs-comment\">// string empty -&gt; error</span>\r\n    <span class=\"hljs-keyword\">add</span> x3,x3,x5                             <span class=\"hljs-comment\">// add 2 length</span>\r\n    <span class=\"hljs-keyword\">add</span> x3,x3,<span class=\"hljs-number\">#1</span>                             <span class=\"hljs-comment\">// +1 for final zero</span>\r\n    <span class=\"hljs-keyword\">mov</span> x6,x0                                <span class=\"hljs-comment\">// save address string 1</span>\r\n    <span class=\"hljs-keyword\">mov</span> x0,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// allocation place heap</span>\r\n    <span class=\"hljs-keyword\">mov</span> x8,BRK                               <span class=\"hljs-comment\">// call system &#x27;brk&#x27;</span>\r\n    <span class=\"hljs-keyword\">svc</span> <span class=\"hljs-number\">#0</span>\r\n    <span class=\"hljs-keyword\">mov</span> x5,x0                                <span class=\"hljs-comment\">// save address heap for output string</span>\r\n    <span class=\"hljs-keyword\">add</span> x0,x0,x3                             <span class=\"hljs-comment\">// reservation place x3 length</span>\r\n    <span class=\"hljs-keyword\">mov</span> x8,BRK                               <span class=\"hljs-comment\">// call system &#x27;brk&#x27;</span>\r\n    <span class=\"hljs-keyword\">svc</span> <span class=\"hljs-number\">#0</span>\r\n    <span class=\"hljs-keyword\">cmp</span> x0,#-<span class=\"hljs-number\">1</span>                               <span class=\"hljs-comment\">// allocation error</span>\r\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">99</span>f\r\n    <span class=\"hljs-comment\">//</span>\r\n    <span class=\"hljs-keyword\">mov</span> x8,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// index load characters string 1</span>\r\n    <span class=\"hljs-keyword\">cmp</span> x2,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// index insertion = 0</span>\r\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">5</span>f                                   <span class=\"hljs-comment\">// insertion at string 1 begin</span>\r\n<span class=\"hljs-number\">3</span>:                                           <span class=\"hljs-comment\">// loop copy characters string 1</span>\r\n    <span class=\"hljs-keyword\">ldrb</span> w0,[x6,x8]                          <span class=\"hljs-comment\">// load character</span>\r\n    <span class=\"hljs-keyword\">cmp</span> w0,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// end string ?</span>\r\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">5</span>f                                   <span class=\"hljs-comment\">// insertion at end</span>\r\n    <span class=\"hljs-keyword\">strb</span> w0,[x5,x8]                          <span class=\"hljs-comment\">// store character in output string</span>\r\n    <span class=\"hljs-keyword\">add</span> x8,x8,<span class=\"hljs-number\">#1</span>                             <span class=\"hljs-comment\">// increment index</span>\r\n    <span class=\"hljs-keyword\">cmp</span> x8,x2                                <span class=\"hljs-comment\">// &lt; insertion index ?</span>\r\n    <span class=\"hljs-keyword\">blt</span> <span class=\"hljs-number\">3</span>b                                   <span class=\"hljs-comment\">// yes -&gt; loop</span>\r\n<span class=\"hljs-number\">5</span>:\r\n    <span class=\"hljs-keyword\">mov</span> x4,x8                                <span class=\"hljs-comment\">// init index character output string</span>\r\n    <span class=\"hljs-keyword\">mov</span> x3,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// index load characters insertion string</span>\r\n<span class=\"hljs-number\">6</span>:\r\n    <span class=\"hljs-keyword\">ldrb</span> w0,[x1,x3]                          <span class=\"hljs-comment\">// load characters insertion string</span>\r\n    <span class=\"hljs-keyword\">cmp</span> w0,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// end string ?</span>\r\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">7</span>f\r\n    <span class=\"hljs-keyword\">strb</span> w0,[x5,x4]                          <span class=\"hljs-comment\">// store in output string</span>\r\n    <span class=\"hljs-keyword\">add</span> x3,x3,<span class=\"hljs-number\">#1</span>                             <span class=\"hljs-comment\">// increment index</span>\r\n    <span class=\"hljs-keyword\">add</span> x4,x4,<span class=\"hljs-number\">#1</span>                             <span class=\"hljs-comment\">// increment output index</span>\r\n    <span class=\"hljs-keyword\">b</span> <span class=\"hljs-number\">6</span>b                                     <span class=\"hljs-comment\">// and loop</span>\r\n<span class=\"hljs-number\">7</span>:\r\n    <span class=\"hljs-keyword\">ldrb</span> w0,[x6,x8]                          <span class=\"hljs-comment\">// load other character string 1</span>\r\n    <span class=\"hljs-keyword\">strb</span> w0,[x5,x4]                          <span class=\"hljs-comment\">// store in output string</span>\r\n    <span class=\"hljs-keyword\">cmp</span> x0,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// end string 1 ?</span>\r\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">8</span>f                                   <span class=\"hljs-comment\">// yes -&gt; end</span>\r\n    <span class=\"hljs-keyword\">add</span> x4,x4,<span class=\"hljs-number\">#1</span>                             <span class=\"hljs-comment\">// increment output index</span>\r\n    <span class=\"hljs-keyword\">add</span> x8,x8,<span class=\"hljs-number\">#1</span>                             <span class=\"hljs-comment\">// increment index</span>\r\n    <span class=\"hljs-keyword\">b</span> <span class=\"hljs-number\">7</span>b                                     <span class=\"hljs-comment\">// and loop</span>\r\n<span class=\"hljs-number\">8</span>:\r\n    <span class=\"hljs-keyword\">mov</span> x0,x5                                <span class=\"hljs-comment\">// return output string address </span>\r\n    <span class=\"hljs-keyword\">b</span> <span class=\"hljs-number\">100</span>f\r\n<span class=\"hljs-number\">99</span>:                                          <span class=\"hljs-comment\">// error</span>\r\n    <span class=\"hljs-keyword\">mov</span> x0,#-<span class=\"hljs-number\">1</span>\r\n<span class=\"hljs-number\">100</span>:\r\n    ldp x2,x3,[<span class=\"hljs-built_in\">sp</span>],<span class=\"hljs-number\">16</span>                        <span class=\"hljs-comment\">// restaur  2 registers</span>\r\n    ldp x1,<span class=\"hljs-built_in\">lr</span>,[<span class=\"hljs-built_in\">sp</span>],<span class=\"hljs-number\">16</span>                        <span class=\"hljs-comment\">// restaur  2 registers</span>\r\n    ret\r\n<span class=\"hljs-comment\">/******************************************************************/</span>\r\n<span class=\"hljs-comment\">/*   insert string at character insertion                         */</span> \r\n<span class=\"hljs-comment\">/******************************************************************/</span>\r\n<span class=\"hljs-comment\">/* x0 contains the address of string 1 */</span>\r\n<span class=\"hljs-comment\">/* x1 contains the address of insertion string   */</span>\r\n<span class=\"hljs-comment\">/* x0 return the address of new string  on the heap */</span>\r\n<span class=\"hljs-comment\">/* or -1 if error   */</span>\r\n<span class=\"hljs-symbol\">strInsertAtChar:</span>\r\n    stp x1,<span class=\"hljs-built_in\">lr</span>,[<span class=\"hljs-built_in\">sp</span>,-<span class=\"hljs-number\">16</span>]!                      <span class=\"hljs-comment\">// save  registers</span>\r\n    stp x2,x3,[<span class=\"hljs-built_in\">sp</span>,-<span class=\"hljs-number\">16</span>]!                      <span class=\"hljs-comment\">// save  registers</span>\r\n    <span class=\"hljs-keyword\">mov</span> x3,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// length counter </span>\r\n<span class=\"hljs-number\">1</span>:                                           <span class=\"hljs-comment\">// compute length of string 1</span>\r\n    <span class=\"hljs-keyword\">ldrb</span> w4,[x0,x3]\r\n    <span class=\"hljs-keyword\">cmp</span> w4,<span class=\"hljs-number\">#0</span>\r\n    cinc  x3,x3,ne                           <span class=\"hljs-comment\">// increment to one if not equal</span>\r\n    <span class=\"hljs-keyword\">bne</span> <span class=\"hljs-number\">1</span>b                                   <span class=\"hljs-comment\">// loop if not equal</span>\r\n    <span class=\"hljs-keyword\">mov</span> x5,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// length counter insertion string</span>\r\n<span class=\"hljs-number\">2</span>:                                           <span class=\"hljs-comment\">// compute length to insertion string</span>\r\n    <span class=\"hljs-keyword\">ldrb</span> w4,[x1,x5]\r\n    <span class=\"hljs-keyword\">cmp</span> x4,<span class=\"hljs-number\">#0</span>\r\n    cinc  x5,x5,ne                           <span class=\"hljs-comment\">// increment to one if not equal</span>\r\n    <span class=\"hljs-keyword\">bne</span> <span class=\"hljs-number\">2</span>b                                   <span class=\"hljs-comment\">// and loop</span>\r\n    <span class=\"hljs-keyword\">cmp</span> x5,<span class=\"hljs-number\">#0</span>\r\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">99</span>f                                  <span class=\"hljs-comment\">// string empty -&gt; error</span>\r\n    <span class=\"hljs-keyword\">add</span> x3,x3,x5                             <span class=\"hljs-comment\">// add 2 length</span>\r\n    <span class=\"hljs-keyword\">add</span> x3,x3,<span class=\"hljs-number\">#1</span>                             <span class=\"hljs-comment\">// +1 for final zero</span>\r\n    <span class=\"hljs-keyword\">mov</span> x6,x0                                <span class=\"hljs-comment\">// save address string 1</span>\r\n    <span class=\"hljs-keyword\">mov</span> x0,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// allocation place heap</span>\r\n    <span class=\"hljs-keyword\">mov</span> x8,BRK                               <span class=\"hljs-comment\">// call system &#x27;brk&#x27; </span>\r\n    <span class=\"hljs-keyword\">svc</span> <span class=\"hljs-number\">#0</span>\r\n    <span class=\"hljs-keyword\">mov</span> x5,x0                                <span class=\"hljs-comment\">// save address heap for output string</span>\r\n    <span class=\"hljs-keyword\">add</span> x0,x0,x3                             <span class=\"hljs-comment\">// reservation place x3 length</span>\r\n    <span class=\"hljs-keyword\">mov</span> x8,BRK                               <span class=\"hljs-comment\">// call system &#x27;brk&#x27;</span>\r\n    <span class=\"hljs-keyword\">svc</span> <span class=\"hljs-number\">#0</span>\r\n    <span class=\"hljs-keyword\">cmp</span> x0,#-<span class=\"hljs-number\">1</span>                               <span class=\"hljs-comment\">// allocation error</span>\r\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">99</span>f\r\n \r\n    <span class=\"hljs-keyword\">mov</span> x2,<span class=\"hljs-number\">0</span>\r\n    <span class=\"hljs-keyword\">mov</span> x4,<span class=\"hljs-number\">0</span>               \r\n<span class=\"hljs-number\">3</span>:                                           <span class=\"hljs-comment\">// loop copy string begin </span>\r\n    <span class=\"hljs-keyword\">ldrb</span> w3,[x6,x2]\r\n    <span class=\"hljs-keyword\">cmp</span> w3,<span class=\"hljs-number\">0</span>\r\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">99</span>f\r\n    <span class=\"hljs-keyword\">cmp</span> w3,CHARPOS                           <span class=\"hljs-comment\">// insertion character ?</span>\r\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">5</span>f                                   <span class=\"hljs-comment\">// yes</span>\r\n    <span class=\"hljs-keyword\">strb</span> w3,[x5,x4]                          <span class=\"hljs-comment\">// no store character in output string</span>\r\n    <span class=\"hljs-keyword\">add</span> x2,x2,<span class=\"hljs-number\">1</span>\r\n    <span class=\"hljs-keyword\">add</span> x4,x4,<span class=\"hljs-number\">1</span>\r\n    <span class=\"hljs-keyword\">b</span> <span class=\"hljs-number\">3</span>b                                     <span class=\"hljs-comment\">// and loop</span>\r\n<span class=\"hljs-number\">5</span>:                                           <span class=\"hljs-comment\">// x4 contains position insertion</span>\r\n    <span class=\"hljs-keyword\">add</span> x8,x4,<span class=\"hljs-number\">1</span>                              <span class=\"hljs-comment\">// init index character output string</span>\r\n                                             <span class=\"hljs-comment\">// at position insertion + one</span>\r\n    <span class=\"hljs-keyword\">mov</span> x3,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// index load characters insertion string</span>\r\n<span class=\"hljs-number\">6</span>:\r\n    <span class=\"hljs-keyword\">ldrb</span> w0,[x1,x3]                          <span class=\"hljs-comment\">// load characters insertion string</span>\r\n    <span class=\"hljs-keyword\">cmp</span> w0,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// end string ?</span>\r\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">7</span>f                                   <span class=\"hljs-comment\">// yes </span>\r\n    <span class=\"hljs-keyword\">strb</span> w0,[x5,x4]                          <span class=\"hljs-comment\">// store in output string</span>\r\n    <span class=\"hljs-keyword\">add</span> x3,x3,<span class=\"hljs-number\">#1</span>                             <span class=\"hljs-comment\">// increment index</span>\r\n    <span class=\"hljs-keyword\">add</span> x4,x4,<span class=\"hljs-number\">#1</span>                             <span class=\"hljs-comment\">// increment output index</span>\r\n    <span class=\"hljs-keyword\">b</span> <span class=\"hljs-number\">6</span>b                                     <span class=\"hljs-comment\">// and loop</span>\r\n<span class=\"hljs-number\">7</span>:                                           <span class=\"hljs-comment\">// loop copy end string </span>\r\n    <span class=\"hljs-keyword\">ldrb</span> w0,[x6,x8]                          <span class=\"hljs-comment\">// load other character string 1</span>\r\n    <span class=\"hljs-keyword\">strb</span> w0,[x5,x4]                          <span class=\"hljs-comment\">// store in output string</span>\r\n    <span class=\"hljs-keyword\">cmp</span> x0,<span class=\"hljs-number\">#0</span>                                <span class=\"hljs-comment\">// end string 1 ?</span>\r\n    <span class=\"hljs-keyword\">beq</span> <span class=\"hljs-number\">8</span>f                                   <span class=\"hljs-comment\">// yes -&gt; end</span>\r\n    <span class=\"hljs-keyword\">add</span> x4,x4,<span class=\"hljs-number\">#1</span>                             <span class=\"hljs-comment\">// increment output index</span>\r\n    <span class=\"hljs-keyword\">add</span> x8,x8,<span class=\"hljs-number\">#1</span>                             <span class=\"hljs-comment\">// increment index</span>\r\n    <span class=\"hljs-keyword\">b</span> <span class=\"hljs-number\">7</span>b                                     <span class=\"hljs-comment\">// and loop</span>\r\n<span class=\"hljs-number\">8</span>:\r\n    <span class=\"hljs-keyword\">mov</span> x0,x5                                <span class=\"hljs-comment\">// return output string address </span>\r\n    <span class=\"hljs-keyword\">b</span> <span class=\"hljs-number\">100</span>f\r\n<span class=\"hljs-number\">99</span>:                                          <span class=\"hljs-comment\">// error</span>\r\n    <span class=\"hljs-keyword\">mov</span> x0,#-<span class=\"hljs-number\">1</span>\r\n<span class=\"hljs-number\">100</span>:\r\n    ldp x2,x3,[<span class=\"hljs-built_in\">sp</span>],<span class=\"hljs-number\">16</span>                        <span class=\"hljs-comment\">// restaur  2 registers</span>\r\n    ldp x1,<span class=\"hljs-built_in\">lr</span>,[<span class=\"hljs-built_in\">sp</span>],<span class=\"hljs-number\">16</span>                        <span class=\"hljs-comment\">// restaur  2 registers</span>\r\n    ret\r\n \r\n<span class=\"hljs-comment\">/********************************************************/</span>\r\n<span class=\"hljs-comment\">/*        File Include fonctions                        */</span>\r\n<span class=\"hljs-comment\">/********************************************************/</span>\r\n<span class=\"hljs-comment\">/* for this file see task include a file in language AArch64 assembly */</span>\r\n<span class=\"hljs-symbol\">.include</span> <span class=\"hljs-string\">&quot;../includeARM64.inc&quot;</span>\r\n"
    }
  },
  "contributors": [
    {
      "name": "Mertcan Davulcu",
      "email": "54983926+mertcandav@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "FuXiang Shu",
      "email": "6470547+Crazy3lf@users.noreply.github.com",
      "commits": 1
    }
  ],
  "explanationUrl": {}
}