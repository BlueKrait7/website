{
  "slug": "graphs-floyd-warshall",
  "name": "Graphs Floyd Warshall",
  "categories": [
    "graphs"
  ],
  "body": {},
  "implementations": {
    "python": {
      "dir": "graphs\\graphs_floyd_warshall.py",
      "url": "https://github.com/TheAlgorithms/python/tree/master/graphs\\graphs_floyd_warshall.py",
      "code": "<span class=\"hljs-comment\"># floyd_warshall.py</span>\r\n<span class=\"hljs-string\">&quot;&quot;&quot;\r\n    The problem is to find the shortest distance between all pairs of vertices in a\r\n    weighted directed graph that can have negative edge weights.\r\n&quot;&quot;&quot;</span>\r\n\r\n\r\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">_print_dist</span>(<span class=\"hljs-params\">dist, v</span>):\r\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;\\nThe shortest path matrix using Floyd Warshall algorithm\\n&quot;</span>)\r\n    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(v):\r\n        <span class=\"hljs-keyword\">for</span> j <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(v):\r\n            <span class=\"hljs-keyword\">if</span> dist[i][j] != <span class=\"hljs-built_in\">float</span>(<span class=\"hljs-string\">&quot;inf&quot;</span>):\r\n                <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-built_in\">int</span>(dist[i][j]), end=<span class=\"hljs-string\">&quot;\\t&quot;</span>)\r\n            <span class=\"hljs-keyword\">else</span>:\r\n                <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;INF&quot;</span>, end=<span class=\"hljs-string\">&quot;\\t&quot;</span>)\r\n        <span class=\"hljs-built_in\">print</span>()\r\n\r\n\r\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">floyd_warshall</span>(<span class=\"hljs-params\">graph, v</span>):\r\n    <span class=\"hljs-string\">&quot;&quot;&quot;\r\n    :param graph: 2D array calculated from weight[edge[i, j]]\r\n    :type graph: List[List[float]]\r\n    :param v: number of vertices\r\n    :type v: int\r\n    :return: shortest distance between all vertex pairs\r\n    distance[u][v] will contain the shortest distance from vertex u to v.\r\n\r\n    1. For all edges from v to n, distance[i][j] = weight(edge(i, j)).\r\n    3. The algorithm then performs distance[i][j] = min(distance[i][j], distance[i][k] +\r\n        distance[k][j]) for each possible pair i, j of vertices.\r\n    4. The above is repeated for each vertex k in the graph.\r\n    5. Whenever distance[i][j] is given a new minimum value, next vertex[i][j] is\r\n        updated to the next vertex[i][k].\r\n    &quot;&quot;&quot;</span>\r\n\r\n    dist = [[<span class=\"hljs-built_in\">float</span>(<span class=\"hljs-string\">&quot;inf&quot;</span>) <span class=\"hljs-keyword\">for</span> _ <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(v)] <span class=\"hljs-keyword\">for</span> _ <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(v)]\r\n\r\n    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(v):\r\n        <span class=\"hljs-keyword\">for</span> j <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(v):\r\n            dist[i][j] = graph[i][j]\r\n\r\n            <span class=\"hljs-comment\"># check vertex k against all other vertices (i, j)</span>\r\n    <span class=\"hljs-keyword\">for</span> k <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(v):\r\n        <span class=\"hljs-comment\"># looping through rows of graph array</span>\r\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(v):\r\n            <span class=\"hljs-comment\"># looping through columns of graph array</span>\r\n            <span class=\"hljs-keyword\">for</span> j <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(v):\r\n                <span class=\"hljs-keyword\">if</span> (\r\n                    dist[i][k] != <span class=\"hljs-built_in\">float</span>(<span class=\"hljs-string\">&quot;inf&quot;</span>)\r\n                    <span class=\"hljs-keyword\">and</span> dist[k][j] != <span class=\"hljs-built_in\">float</span>(<span class=\"hljs-string\">&quot;inf&quot;</span>)\r\n                    <span class=\"hljs-keyword\">and</span> dist[i][k] + dist[k][j] &lt; dist[i][j]\r\n                ):\r\n                    dist[i][j] = dist[i][k] + dist[k][j]\r\n\r\n    _print_dist(dist, v)\r\n    <span class=\"hljs-keyword\">return</span> dist, v\r\n\r\n\r\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\r\n    v = <span class=\"hljs-built_in\">int</span>(<span class=\"hljs-built_in\">input</span>(<span class=\"hljs-string\">&quot;Enter number of vertices: &quot;</span>))\r\n    e = <span class=\"hljs-built_in\">int</span>(<span class=\"hljs-built_in\">input</span>(<span class=\"hljs-string\">&quot;Enter number of edges: &quot;</span>))\r\n\r\n    graph = [[<span class=\"hljs-built_in\">float</span>(<span class=\"hljs-string\">&quot;inf&quot;</span>) <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(v)] <span class=\"hljs-keyword\">for</span> j <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(v)]\r\n\r\n    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(v):\r\n        graph[i][i] = <span class=\"hljs-number\">0.0</span>\r\n\r\n        <span class=\"hljs-comment\"># src and dst are indices that must be within the array size graph[e][v]</span>\r\n        <span class=\"hljs-comment\"># failure to follow this will result in an error</span>\r\n    <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(e):\r\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;\\nEdge &quot;</span>, i + <span class=\"hljs-number\">1</span>)\r\n        src = <span class=\"hljs-built_in\">int</span>(<span class=\"hljs-built_in\">input</span>(<span class=\"hljs-string\">&quot;Enter source:&quot;</span>))\r\n        dst = <span class=\"hljs-built_in\">int</span>(<span class=\"hljs-built_in\">input</span>(<span class=\"hljs-string\">&quot;Enter destination:&quot;</span>))\r\n        weight = <span class=\"hljs-built_in\">float</span>(<span class=\"hljs-built_in\">input</span>(<span class=\"hljs-string\">&quot;Enter weight:&quot;</span>))\r\n        graph[src][dst] = weight\r\n\r\n    floyd_warshall(graph, v)\r\n\r\n    <span class=\"hljs-comment\"># Example Input</span>\r\n    <span class=\"hljs-comment\"># Enter number of vertices: 3</span>\r\n    <span class=\"hljs-comment\"># Enter number of edges: 2</span>\r\n\r\n    <span class=\"hljs-comment\"># # generated graph from vertex and edge inputs</span>\r\n    <span class=\"hljs-comment\"># [[inf, inf, inf], [inf, inf, inf], [inf, inf, inf]]</span>\r\n    <span class=\"hljs-comment\"># [[0.0, inf, inf], [inf, 0.0, inf], [inf, inf, 0.0]]</span>\r\n\r\n    <span class=\"hljs-comment\"># specify source, destination and weight for edge #1</span>\r\n    <span class=\"hljs-comment\"># Edge  1</span>\r\n    <span class=\"hljs-comment\"># Enter source:1</span>\r\n    <span class=\"hljs-comment\"># Enter destination:2</span>\r\n    <span class=\"hljs-comment\"># Enter weight:2</span>\r\n\r\n    <span class=\"hljs-comment\"># specify source, destination and weight for edge #2</span>\r\n    <span class=\"hljs-comment\"># Edge  2</span>\r\n    <span class=\"hljs-comment\"># Enter source:2</span>\r\n    <span class=\"hljs-comment\"># Enter destination:1</span>\r\n    <span class=\"hljs-comment\"># Enter weight:1</span>\r\n\r\n    <span class=\"hljs-comment\"># # Expected Output from the vertice, edge and src, dst, weight inputs!!</span>\r\n    <span class=\"hljs-comment\"># 0\t\tINF\tINF</span>\r\n    <span class=\"hljs-comment\"># INF\t0\t2</span>\r\n    <span class=\"hljs-comment\"># INF\t1\t0</span>\r\n"
    }
  },
  "contributors": [
    {
      "name": "William Zhang",
      "email": "39932068+WilliamHYZhang@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Christian Clauss",
      "email": "cclauss@me.com",
      "commits": 2
    }
  ],
  "explanationUrl": {}
}