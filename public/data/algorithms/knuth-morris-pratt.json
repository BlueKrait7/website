{
  "slug": "knuth-morris-pratt",
  "name": "Knuth Morris Pratt",
  "categories": [
    "strings"
  ],
  "body": {},
  "implementations": {
    "python": {
      "dir": "strings\\knuth_morris_pratt.py",
      "url": "https://github.com/TheAlgorithms/python/tree/master/strings\\knuth_morris_pratt.py",
      "code": "<span class=\"hljs-keyword\">from</span> __future__ <span class=\"hljs-keyword\">import</span> annotations\r\n\r\n\r\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">kmp</span>(<span class=\"hljs-params\">pattern: <span class=\"hljs-built_in\">str</span>, text: <span class=\"hljs-built_in\">str</span></span>) -&gt; <span class=\"hljs-built_in\">bool</span>:\r\n    <span class=\"hljs-string\">&quot;&quot;&quot;\r\n    The Knuth-Morris-Pratt Algorithm for finding a pattern within a piece of text\r\n    with complexity O(n + m)\r\n\r\n    1) Preprocess pattern to identify any suffixes that are identical to prefixes\r\n\r\n        This tells us where to continue from if we get a mismatch between a character\r\n        in our pattern and the text.\r\n\r\n    2) Step through the text one character at a time and compare it to a character in\r\n        the pattern updating our location within the pattern if necessary\r\n\r\n    &quot;&quot;&quot;</span>\r\n\r\n    <span class=\"hljs-comment\"># 1) Construct the failure array</span>\r\n    failure = get_failure_array(pattern)\r\n\r\n    <span class=\"hljs-comment\"># 2) Step through text searching for pattern</span>\r\n    i, j = <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>  <span class=\"hljs-comment\"># index into text, pattern</span>\r\n    <span class=\"hljs-keyword\">while</span> i &lt; <span class=\"hljs-built_in\">len</span>(text):\r\n        <span class=\"hljs-keyword\">if</span> pattern[j] == text[i]:\r\n            <span class=\"hljs-keyword\">if</span> j == (<span class=\"hljs-built_in\">len</span>(pattern) - <span class=\"hljs-number\">1</span>):\r\n                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">True</span>\r\n            j += <span class=\"hljs-number\">1</span>\r\n\r\n        <span class=\"hljs-comment\"># if this is a prefix in our pattern</span>\r\n        <span class=\"hljs-comment\"># just go back far enough to continue</span>\r\n        <span class=\"hljs-keyword\">elif</span> j &gt; <span class=\"hljs-number\">0</span>:\r\n            j = failure[j - <span class=\"hljs-number\">1</span>]\r\n            <span class=\"hljs-keyword\">continue</span>\r\n        i += <span class=\"hljs-number\">1</span>\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">False</span>\r\n\r\n\r\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_failure_array</span>(<span class=\"hljs-params\">pattern: <span class=\"hljs-built_in\">str</span></span>) -&gt; <span class=\"hljs-built_in\">list</span>[<span class=\"hljs-built_in\">int</span>]:\r\n    <span class=\"hljs-string\">&quot;&quot;&quot;\r\n    Calculates the new index we should go to if we fail a comparison\r\n    :param pattern:\r\n    :return:\r\n    &quot;&quot;&quot;</span>\r\n    failure = [<span class=\"hljs-number\">0</span>]\r\n    i = <span class=\"hljs-number\">0</span>\r\n    j = <span class=\"hljs-number\">1</span>\r\n    <span class=\"hljs-keyword\">while</span> j &lt; <span class=\"hljs-built_in\">len</span>(pattern):\r\n        <span class=\"hljs-keyword\">if</span> pattern[i] == pattern[j]:\r\n            i += <span class=\"hljs-number\">1</span>\r\n        <span class=\"hljs-keyword\">elif</span> i &gt; <span class=\"hljs-number\">0</span>:\r\n            i = failure[i - <span class=\"hljs-number\">1</span>]\r\n            <span class=\"hljs-keyword\">continue</span>\r\n        j += <span class=\"hljs-number\">1</span>\r\n        failure.append(i)\r\n    <span class=\"hljs-keyword\">return</span> failure\r\n\r\n\r\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\r\n    <span class=\"hljs-comment\"># Test 1)</span>\r\n    pattern = <span class=\"hljs-string\">&quot;abc1abc12&quot;</span>\r\n    text1 = <span class=\"hljs-string\">&quot;alskfjaldsabc1abc1abc12k23adsfabcabc&quot;</span>\r\n    text2 = <span class=\"hljs-string\">&quot;alskfjaldsk23adsfabcabc&quot;</span>\r\n    <span class=\"hljs-keyword\">assert</span> kmp(pattern, text1) <span class=\"hljs-keyword\">and</span> <span class=\"hljs-keyword\">not</span> kmp(pattern, text2)\r\n\r\n    <span class=\"hljs-comment\"># Test 2)</span>\r\n    pattern = <span class=\"hljs-string\">&quot;ABABX&quot;</span>\r\n    text = <span class=\"hljs-string\">&quot;ABABZABABYABABX&quot;</span>\r\n    <span class=\"hljs-keyword\">assert</span> kmp(pattern, text)\r\n\r\n    <span class=\"hljs-comment\"># Test 3)</span>\r\n    pattern = <span class=\"hljs-string\">&quot;AAAB&quot;</span>\r\n    text = <span class=\"hljs-string\">&quot;ABAAAAAB&quot;</span>\r\n    <span class=\"hljs-keyword\">assert</span> kmp(pattern, text)\r\n\r\n    <span class=\"hljs-comment\"># Test 4)</span>\r\n    pattern = <span class=\"hljs-string\">&quot;abcdabcy&quot;</span>\r\n    text = <span class=\"hljs-string\">&quot;abcxabcdabxabcdabcdabcy&quot;</span>\r\n    <span class=\"hljs-keyword\">assert</span> kmp(pattern, text)\r\n\r\n    <span class=\"hljs-comment\"># Test 5)</span>\r\n    pattern = <span class=\"hljs-string\">&quot;aabaabaaa&quot;</span>\r\n    <span class=\"hljs-keyword\">assert</span> get_failure_array(pattern) == [<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">2</span>]\r\n"
    },
    "c-plus-plus": {
      "dir": "strings\\knuth_morris_pratt.cpp",
      "url": "https://github.com/TheAlgorithms/c-plus-plus/tree/master/strings\\knuth_morris_pratt.cpp",
      "code": "<span class=\"hljs-comment\">/**\r\n * \\file\r\n * \\brief The [Knuth-Morris-Pratt\r\n * Algorithm](https://en.wikipedia.org/wiki/Knuth–Morris–Pratt_algorithm) for\r\n * finding a pattern within a piece of text with complexity O(n + m)\r\n *\r\n * 1. Preprocess pattern to identify any suffixes that are identical to\r\n * prefixes. This tells us where to continue from if we get a mismatch between a\r\n * character in our pattern and the text.\r\n * 2. Step through the text one character at a time and compare it to a\r\n * character in the pattern updating our location within the pattern if\r\n * necessary\r\n */</span>\r\n\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;iostream&gt;</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">ifdef</span> _MSC_VER</span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;string&gt;</span>  <span class=\"hljs-comment\">// use this for MS Visual C++</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">else</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;cstring&gt;</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">endif</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;vector&gt;</span></span>\r\n\r\n<span class=\"hljs-comment\">/** \\namespace string_search\r\n * \\brief String search algorithms\r\n */</span>\r\n<span class=\"hljs-keyword\">namespace</span> string_search {\r\n<span class=\"hljs-comment\">/**\r\n * Generate the partial match table aka failure function for a pattern to\r\n * search.\r\n * \\param[in] pattern text for which to create the partial match table\r\n * \\returns the partial match table as a vector array\r\n */</span>\r\n<span class=\"hljs-function\">std::vector&lt;<span class=\"hljs-type\">int</span>&gt; <span class=\"hljs-title\">getFailureArray</span><span class=\"hljs-params\">(<span class=\"hljs-type\">const</span> std::string &amp;pattern)</span> </span>{\r\n    <span class=\"hljs-type\">int</span> pattern_length = pattern.<span class=\"hljs-built_in\">size</span>();\r\n    <span class=\"hljs-function\">std::vector&lt;<span class=\"hljs-type\">int</span>&gt; <span class=\"hljs-title\">failure</span><span class=\"hljs-params\">(pattern_length + <span class=\"hljs-number\">1</span>)</span></span>;\r\n    failure[<span class=\"hljs-number\">0</span>] = <span class=\"hljs-number\">-1</span>;\r\n    <span class=\"hljs-type\">int</span> j = <span class=\"hljs-number\">-1</span>;\r\n\r\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; pattern_length; i++) {\r\n        <span class=\"hljs-keyword\">while</span> (j != <span class=\"hljs-number\">-1</span> &amp;&amp; pattern[j] != pattern[i]) {\r\n            j = failure[j];\r\n        }\r\n        j++;\r\n        failure[i + <span class=\"hljs-number\">1</span>] = j;\r\n    }\r\n    <span class=\"hljs-keyword\">return</span> failure;\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * KMP algorithm to find a pattern in a text\r\n * \\param[in] pattern string pattern to search\r\n * \\param[in] text text in which to search\r\n * \\returns `true` if pattern was found\r\n * \\returns `false` if pattern was not found\r\n */</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">kmp</span><span class=\"hljs-params\">(<span class=\"hljs-type\">const</span> std::string &amp;pattern, <span class=\"hljs-type\">const</span> std::string &amp;text)</span> </span>{\r\n    <span class=\"hljs-type\">int</span> text_length = text.<span class=\"hljs-built_in\">size</span>(), pattern_length = pattern.<span class=\"hljs-built_in\">size</span>();\r\n    std::vector&lt;<span class=\"hljs-type\">int</span>&gt; failure = <span class=\"hljs-built_in\">getFailureArray</span>(pattern);\r\n\r\n    <span class=\"hljs-type\">int</span> k = <span class=\"hljs-number\">0</span>;\r\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; text_length; j++) {\r\n        <span class=\"hljs-keyword\">while</span> (k != <span class=\"hljs-number\">-1</span> &amp;&amp; pattern[k] != text[j]) {\r\n            k = failure[k];\r\n        }\r\n        k++;\r\n        <span class=\"hljs-keyword\">if</span> (k == pattern_length)\r\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\r\n    }\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\r\n}\r\n}  <span class=\"hljs-comment\">// namespace string_search</span>\r\n\r\n<span class=\"hljs-keyword\">using</span> string_search::kmp;\r\n\r\n<span class=\"hljs-comment\">/** Main function */</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span> </span>{\r\n    std::string text = <span class=\"hljs-string\">&quot;alskfjaldsabc1abc1abc12k23adsfabcabc&quot;</span>;\r\n    std::string pattern = <span class=\"hljs-string\">&quot;abc1abc12l&quot;</span>;\r\n\r\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">kmp</span>(pattern, text) == <span class=\"hljs-literal\">true</span>) {\r\n        std::cout &lt;&lt; <span class=\"hljs-string\">&quot;Found&quot;</span> &lt;&lt; std::endl;\r\n    } <span class=\"hljs-keyword\">else</span> {\r\n        std::cout &lt;&lt; <span class=\"hljs-string\">&quot;Not Found&quot;</span> &lt;&lt; std::endl;\r\n    }\r\n\r\n    text = <span class=\"hljs-string\">&quot;abcabc&quot;</span>;\r\n    pattern = <span class=\"hljs-string\">&quot;bca&quot;</span>;\r\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">kmp</span>(pattern, text) == <span class=\"hljs-literal\">true</span>) {\r\n        std::cout &lt;&lt; <span class=\"hljs-string\">&quot;Found&quot;</span> &lt;&lt; std::endl;\r\n    } <span class=\"hljs-keyword\">else</span> {\r\n        std::cout &lt;&lt; <span class=\"hljs-string\">&quot;Not Found&quot;</span> &lt;&lt; std::endl;\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\r\n}\r\n"
    },
    "f-sharp": {
      "dir": "Algorithms\\Strings\\KnuthMorrisPratt.fs",
      "url": "https://github.com/TheAlgorithms/f-sharp/tree/master/Algorithms\\Strings\\KnuthMorrisPratt.fs",
      "code": "﻿<span class=\"hljs-keyword\">namespace</span> Algorithms.Strings\r\n\r\n<span class=\"hljs-keyword\">module</span> KnuthMorrisPratt <span class=\"hljs-operator\">=</span>\r\n    <span class=\"hljs-keyword\">let</span> getFailureArray (pattern<span class=\"hljs-operator\">:</span> <span class=\"hljs-type\">string</span>)<span class=\"hljs-operator\">:</span> <span class=\"hljs-type\">list</span><span class=\"hljs-operator\">&lt;</span><span class=\"hljs-type\">int</span><span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-operator\">=</span>\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mutable</span> failure <span class=\"hljs-operator\">=</span> [ <span class=\"hljs-number\">0</span> ]\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mutable</span> i <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mutable</span> j <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">1</span>\r\n\r\n        <span class=\"hljs-keyword\">while</span> j <span class=\"hljs-operator\">&lt;</span> pattern.Length <span class=\"hljs-keyword\">do</span>\r\n            <span class=\"hljs-keyword\">if</span> pattern.[i] <span class=\"hljs-operator\">=</span> pattern.[j] <span class=\"hljs-keyword\">then</span>\r\n                i <span class=\"hljs-operator\">&lt;-</span> i <span class=\"hljs-operator\">+</span> <span class=\"hljs-number\">1</span>\r\n            <span class=\"hljs-keyword\">elif</span> i <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">then</span>\r\n                i <span class=\"hljs-operator\">&lt;-</span> failure.[i <span class=\"hljs-operator\">-</span> <span class=\"hljs-number\">1</span>]\r\n\r\n            j <span class=\"hljs-operator\">&lt;-</span> j <span class=\"hljs-operator\">+</span> <span class=\"hljs-number\">1</span>\r\n            failure <span class=\"hljs-operator\">&lt;-</span> failure <span class=\"hljs-operator\">|&gt;</span> List.append [ i ]\r\n\r\n        failure\r\n\r\n    <span class=\"hljs-comment\">/// &lt;summary&gt;</span>\r\n    <span class=\"hljs-comment\">/// The Knuth-Morris-Pratt Algorithm for finding a pattern within a piece of text</span>\r\n    <span class=\"hljs-comment\">/// with complexity O(n + m)</span>\r\n    <span class=\"hljs-comment\">/// &lt;/summary&gt;</span>\r\n    <span class=\"hljs-comment\">/// &lt;param name=&quot;pattern&quot;&gt;&lt;/param&gt;</span>\r\n    <span class=\"hljs-comment\">/// &lt;param name=&quot;text&quot;&gt;&lt;/param&gt;</span>\r\n    <span class=\"hljs-comment\">/// &lt;returns&gt;&lt;/returns&gt;</span>\r\n    <span class=\"hljs-keyword\">let</span> kmp (pattern<span class=\"hljs-operator\">:</span> <span class=\"hljs-type\">string</span>, text<span class=\"hljs-operator\">:</span> <span class=\"hljs-type\">string</span>)<span class=\"hljs-operator\">:</span> <span class=\"hljs-type\">bool</span> <span class=\"hljs-operator\">=</span>\r\n        <span class=\"hljs-comment\">// 1) Construct the failure array</span>\r\n        <span class=\"hljs-keyword\">let</span> failure <span class=\"hljs-operator\">=</span> getFailureArray pattern\r\n\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mutable</span> result <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">false</span>\r\n\r\n        <span class=\"hljs-comment\">// 2) Step through text searching for pattern</span>\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mutable</span> i, j <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span> <span class=\"hljs-comment\">// Index into text, pattern</span>\r\n\r\n        <span class=\"hljs-keyword\">while</span> i <span class=\"hljs-operator\">&lt;</span> text.Length <span class=\"hljs-keyword\">do</span>\r\n            <span class=\"hljs-keyword\">if</span> pattern.[j] <span class=\"hljs-operator\">=</span> text.[i] <span class=\"hljs-keyword\">then</span>\r\n                <span class=\"hljs-keyword\">if</span> j <span class=\"hljs-operator\">=</span> pattern.Length <span class=\"hljs-operator\">-</span> <span class=\"hljs-number\">1</span> <span class=\"hljs-operator\">&amp;&amp;</span> (<span class=\"hljs-built_in\">not</span> result) <span class=\"hljs-keyword\">then</span>\r\n                    result <span class=\"hljs-operator\">&lt;-</span> <span class=\"hljs-literal\">true</span>\r\n\r\n                j <span class=\"hljs-operator\">&lt;-</span> j <span class=\"hljs-operator\">+</span> <span class=\"hljs-number\">1</span>\r\n\r\n            <span class=\"hljs-comment\">// If this is a prefix in our pattern</span>\r\n            <span class=\"hljs-comment\">// just go back far enough to continue</span>\r\n            <span class=\"hljs-keyword\">elif</span> j <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-operator\">&amp;&amp;</span> (<span class=\"hljs-built_in\">not</span> result) <span class=\"hljs-keyword\">then</span>\r\n                j <span class=\"hljs-operator\">&lt;-</span> failure.[j <span class=\"hljs-operator\">-</span> <span class=\"hljs-number\">1</span>]\r\n\r\n            i <span class=\"hljs-operator\">&lt;-</span> i <span class=\"hljs-operator\">+</span> <span class=\"hljs-number\">1</span>\r\n\r\n        result\r\n"
    },
    "rust": {
      "dir": "src\\string\\knuth_morris_pratt.rs",
      "url": "https://github.com/TheAlgorithms/rust/tree/master/src\\string\\knuth_morris_pratt.rs",
      "code": "<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">knuth_morris_pratt</span>(st: <span class=\"hljs-type\">String</span>, pat: <span class=\"hljs-type\">String</span>) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">usize</span>&gt; {\r\n    <span class=\"hljs-keyword\">if</span> st.<span class=\"hljs-title function_ invoke__\">is_empty</span>() || pat.<span class=\"hljs-title function_ invoke__\">is_empty</span>() {\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">vec!</span>[];\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">string</span> = st.<span class=\"hljs-title function_ invoke__\">into_bytes</span>();\r\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">pattern</span> = pat.<span class=\"hljs-title function_ invoke__\">into_bytes</span>();\r\n\r\n    <span class=\"hljs-comment\">// build the partial match table</span>\r\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">partial</span> = <span class=\"hljs-built_in\">vec!</span>[<span class=\"hljs-number\">0</span>];\r\n    <span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">1</span>..pattern.<span class=\"hljs-title function_ invoke__\">len</span>() {\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">j</span> = partial[i - <span class=\"hljs-number\">1</span>];\r\n        <span class=\"hljs-keyword\">while</span> j &gt; <span class=\"hljs-number\">0</span> &amp;&amp; pattern[j] != pattern[i] {\r\n            j = partial[j - <span class=\"hljs-number\">1</span>];\r\n        }\r\n        partial.<span class=\"hljs-title function_ invoke__\">push</span>(<span class=\"hljs-keyword\">if</span> pattern[j] == pattern[i] { j + <span class=\"hljs-number\">1</span> } <span class=\"hljs-keyword\">else</span> { j });\r\n    }\r\n\r\n    <span class=\"hljs-comment\">// and read &#x27;string&#x27; to find &#x27;pattern&#x27;</span>\r\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">ret</span> = <span class=\"hljs-built_in\">vec!</span>[];\r\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">j</span> = <span class=\"hljs-number\">0</span>;\r\n\r\n    <span class=\"hljs-title function_ invoke__\">for</span> (i, &amp;c) <span class=\"hljs-keyword\">in</span> string.<span class=\"hljs-title function_ invoke__\">iter</span>().<span class=\"hljs-title function_ invoke__\">enumerate</span>() {\r\n        <span class=\"hljs-keyword\">while</span> j &gt; <span class=\"hljs-number\">0</span> &amp;&amp; c != pattern[j] {\r\n            j = partial[j - <span class=\"hljs-number\">1</span>];\r\n        }\r\n        <span class=\"hljs-keyword\">if</span> c == pattern[j] {\r\n            j += <span class=\"hljs-number\">1</span>;\r\n        }\r\n        <span class=\"hljs-keyword\">if</span> j == pattern.<span class=\"hljs-title function_ invoke__\">len</span>() {\r\n            ret.<span class=\"hljs-title function_ invoke__\">push</span>(i + <span class=\"hljs-number\">1</span> - j);\r\n            j = partial[j - <span class=\"hljs-number\">1</span>];\r\n        }\r\n    }\r\n\r\n    ret\r\n}\r\n\r\n<span class=\"hljs-meta\">#[cfg(test)]</span>\r\n<span class=\"hljs-keyword\">mod</span> tests {\r\n    <span class=\"hljs-keyword\">use</span> super::*;\r\n\r\n    <span class=\"hljs-meta\">#[test]</span>\r\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">each_letter_matches</span>() {\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">index</span> = <span class=\"hljs-title function_ invoke__\">knuth_morris_pratt</span>(<span class=\"hljs-string\">&quot;aaa&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>(), <span class=\"hljs-string\">&quot;a&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>());\r\n        <span class=\"hljs-built_in\">assert_eq!</span>(index, <span class=\"hljs-built_in\">vec!</span>[<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>]);\r\n    }\r\n\r\n    <span class=\"hljs-meta\">#[test]</span>\r\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">a_few_separate_matches</span>() {\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">index</span> = <span class=\"hljs-title function_ invoke__\">knuth_morris_pratt</span>(<span class=\"hljs-string\">&quot;abababa&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>(), <span class=\"hljs-string\">&quot;ab&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>());\r\n        <span class=\"hljs-built_in\">assert_eq!</span>(index, <span class=\"hljs-built_in\">vec!</span>[<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">4</span>]);\r\n    }\r\n\r\n    <span class=\"hljs-meta\">#[test]</span>\r\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">one_match</span>() {\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">index</span> =\r\n            <span class=\"hljs-title function_ invoke__\">knuth_morris_pratt</span>(<span class=\"hljs-string\">&quot;ABC ABCDAB ABCDABCDABDE&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>(), <span class=\"hljs-string\">&quot;ABCDABD&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>());\r\n        <span class=\"hljs-built_in\">assert_eq!</span>(index, <span class=\"hljs-built_in\">vec!</span>[<span class=\"hljs-number\">15</span>]);\r\n    }\r\n\r\n    <span class=\"hljs-meta\">#[test]</span>\r\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">lots_of_matches</span>() {\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">index</span> = <span class=\"hljs-title function_ invoke__\">knuth_morris_pratt</span>(<span class=\"hljs-string\">&quot;aaabaabaaaaa&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>(), <span class=\"hljs-string\">&quot;aa&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>());\r\n        <span class=\"hljs-built_in\">assert_eq!</span>(index, <span class=\"hljs-built_in\">vec!</span>[<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">10</span>]);\r\n    }\r\n\r\n    <span class=\"hljs-meta\">#[test]</span>\r\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">lots_of_intricate_matches</span>() {\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">index</span> = <span class=\"hljs-title function_ invoke__\">knuth_morris_pratt</span>(<span class=\"hljs-string\">&quot;ababababa&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>(), <span class=\"hljs-string\">&quot;aba&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>());\r\n        <span class=\"hljs-built_in\">assert_eq!</span>(index, <span class=\"hljs-built_in\">vec!</span>[<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">6</span>]);\r\n    }\r\n\r\n    <span class=\"hljs-meta\">#[test]</span>\r\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">not_found0</span>() {\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">index</span> = <span class=\"hljs-title function_ invoke__\">knuth_morris_pratt</span>(<span class=\"hljs-string\">&quot;abcde&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>(), <span class=\"hljs-string\">&quot;f&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>());\r\n        <span class=\"hljs-built_in\">assert_eq!</span>(index, <span class=\"hljs-built_in\">vec!</span>[]);\r\n    }\r\n\r\n    <span class=\"hljs-meta\">#[test]</span>\r\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">not_found1</span>() {\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">index</span> = <span class=\"hljs-title function_ invoke__\">knuth_morris_pratt</span>(<span class=\"hljs-string\">&quot;abcde&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>(), <span class=\"hljs-string\">&quot;ac&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>());\r\n        <span class=\"hljs-built_in\">assert_eq!</span>(index, <span class=\"hljs-built_in\">vec!</span>[]);\r\n    }\r\n\r\n    <span class=\"hljs-meta\">#[test]</span>\r\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">not_found2</span>() {\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">index</span> = <span class=\"hljs-title function_ invoke__\">knuth_morris_pratt</span>(<span class=\"hljs-string\">&quot;ababab&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>(), <span class=\"hljs-string\">&quot;bababa&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>());\r\n        <span class=\"hljs-built_in\">assert_eq!</span>(index, <span class=\"hljs-built_in\">vec!</span>[]);\r\n    }\r\n\r\n    <span class=\"hljs-meta\">#[test]</span>\r\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">empty_string</span>() {\r\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">index</span> = <span class=\"hljs-title function_ invoke__\">knuth_morris_pratt</span>(<span class=\"hljs-string\">&quot;&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>(), <span class=\"hljs-string\">&quot;abcdef&quot;</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>());\r\n        <span class=\"hljs-built_in\">assert_eq!</span>(index, <span class=\"hljs-built_in\">vec!</span>[]);\r\n    }\r\n}\r\n"
    }
  },
  "contributors": [
    {
      "name": "Pierre Gimalac",
      "email": "pierre.gimalac@gmail.com",
      "commits": 1
    },
    {
      "name": "Krishna Vedala",
      "email": "7001608+kvedala@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Raman Preet Singh",
      "email": "ramanpre0810@gmail.com",
      "commits": 1
    },
    {
      "name": "mahbubur.rahman",
      "email": "mahbubur.rahman@bjitgroup.com",
      "commits": 1
    },
    {
      "name": "Dmytro Litvinov",
      "email": "litvinov.dmytro.it@gmail.com",
      "commits": 1
    },
    {
      "name": "William Zhang",
      "email": "39932068+WilliamHYZhang@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Christian Clauss",
      "email": "cclauss@me.com",
      "commits": 2
    },
    {
      "name": "Allister Isaiah Harvey",
      "email": "41553768+powpow58@users.noreply.github.com",
      "commits": 2
    },
    {
      "name": "damelLP",
      "email": "dlambertpowell@gmail.com",
      "commits": 2
    }
  ],
  "explanationUrl": {}
}