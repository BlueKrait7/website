{
  "slug": "check-if-binary-tree-balanced",
  "name": "Check If Binary Tree Balanced",
  "categories": [
    "datastructures",
    "tree"
  ],
  "body": {},
  "implementations": {
    "java": {
      "dir": "src\\main\\java\\com\\thealgorithms\\datastructures\\trees\\CheckIfBinaryTreeBalanced.java",
      "url": "https://github.com/TheAlgorithms/java/tree/master/src\\main\\java\\com\\thealgorithms\\datastructures\\trees\\CheckIfBinaryTreeBalanced.java",
      "code": "<span class=\"hljs-keyword\">package</span> com.thealgorithms.datastructures.trees;\r\n\r\n<span class=\"hljs-keyword\">import</span> java.util.Stack;\r\n<span class=\"hljs-keyword\">import</span> java.util.HashMap;\r\n\r\n<span class=\"hljs-comment\">/**\r\n * This class will check if a BinaryTree is balanced. A balanced binary tree is\r\n * defined as a binary tree where the differenced in height between the left and\r\n * right subtree of each node differs by at most one.\r\n *\r\n * This can be done in both an iterative and recursive fashion. Below,\r\n * `isBalancedRecursive()` is implemented in a recursive fashion, and\r\n * `isBalancedIterative()` is implemented in an iterative fashion.\r\n *\r\n * <span class=\"hljs-doctag\">@author</span> [Ian Cowan](https://github.com/iccowan)\r\n */</span>\r\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CheckIfBinaryTreeBalanced</span> {\r\n\r\n    <span class=\"hljs-comment\">/**\r\n     * This class implements the BinaryTree for these algorithms\r\n     */</span>\r\n    <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BinaryTree</span> {\r\n\r\n        <span class=\"hljs-comment\">/**\r\n         * The root node of the binary tree\r\n         */</span>\r\n        <span class=\"hljs-type\">BTNode</span> <span class=\"hljs-variable\">root</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;\r\n    }\r\n\r\n    <span class=\"hljs-comment\">/**\r\n     * This class implements the nodes for the binary tree\r\n     */</span>\r\n    <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BTNode</span> {\r\n\r\n        <span class=\"hljs-comment\">/**\r\n         * The value of the node\r\n         */</span>\r\n        <span class=\"hljs-type\">int</span> value;\r\n\r\n        <span class=\"hljs-comment\">/**\r\n         * The left child of the node\r\n         */</span>\r\n        <span class=\"hljs-type\">BTNode</span> <span class=\"hljs-variable\">left</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;\r\n\r\n        <span class=\"hljs-comment\">/**\r\n         * The right child of the node\r\n         */</span>\r\n        <span class=\"hljs-type\">BTNode</span> <span class=\"hljs-variable\">right</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;\r\n\r\n        <span class=\"hljs-comment\">/**\r\n         * Constructor\r\n         */</span>\r\n        BTNode(<span class=\"hljs-type\">int</span> value) {\r\n            <span class=\"hljs-built_in\">this</span>.value = value;\r\n        }\r\n    }\r\n\r\n    <span class=\"hljs-comment\">/**\r\n     * Recursive is BT balanced implementation\r\n     *\r\n     * <span class=\"hljs-doctag\">@param</span> binaryTree The binary tree to check if balanced\r\n     */</span>\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">boolean</span> <span class=\"hljs-title function_\">isBalancedRecursive</span><span class=\"hljs-params\">(BinaryTree binaryTree)</span> {\r\n        <span class=\"hljs-comment\">// Create an array of length 1 to keep track of our balance</span>\r\n        <span class=\"hljs-comment\">// Default to true. We use an array so we have an efficient mutable object</span>\r\n        <span class=\"hljs-type\">boolean</span>[] isBalanced = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">boolean</span>[<span class=\"hljs-number\">1</span>];\r\n        isBalanced[<span class=\"hljs-number\">0</span>] = <span class=\"hljs-literal\">true</span>;\r\n\r\n        <span class=\"hljs-comment\">// Check for balance and return whether or not we are balanced</span>\r\n        isBalancedRecursive(binaryTree.root, <span class=\"hljs-number\">0</span>, isBalanced);\r\n        <span class=\"hljs-keyword\">return</span> isBalanced[<span class=\"hljs-number\">0</span>];\r\n    }\r\n\r\n    <span class=\"hljs-comment\">/**\r\n     * Private helper method to keep track of the depth and balance during\r\n     * recursion. We effectively perform a modified post-order traversal where\r\n     * we are looking at the heights of both children of each node in the tree\r\n     *\r\n     * <span class=\"hljs-doctag\">@param</span> node The current node to explore\r\n     * <span class=\"hljs-doctag\">@param</span> depth The current depth of the node\r\n     * <span class=\"hljs-doctag\">@param</span> isBalanced The array of length 1 keeping track of our balance\r\n     */</span>\r\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">isBalancedRecursive</span><span class=\"hljs-params\">(BTNode node, <span class=\"hljs-type\">int</span> depth, <span class=\"hljs-type\">boolean</span>[] isBalanced)</span> {\r\n        <span class=\"hljs-comment\">// If the node is null, we should not explore it and the height is 0</span>\r\n        <span class=\"hljs-comment\">// If the tree is already not balanced, might as well stop because we</span>\r\n        <span class=\"hljs-comment\">// can&#x27;t make it balanced now!</span>\r\n        <span class=\"hljs-keyword\">if</span> (node == <span class=\"hljs-literal\">null</span> || !isBalanced[<span class=\"hljs-number\">0</span>]) {\r\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\r\n        }\r\n\r\n        <span class=\"hljs-comment\">// Visit the left and right children, incrementing their depths by 1</span>\r\n        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">leftHeight</span> <span class=\"hljs-operator\">=</span> isBalancedRecursive(node.left, depth + <span class=\"hljs-number\">1</span>, isBalanced);\r\n        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">rightHeight</span> <span class=\"hljs-operator\">=</span> isBalancedRecursive(node.right, depth + <span class=\"hljs-number\">1</span>, isBalanced);\r\n\r\n        <span class=\"hljs-comment\">// If the height of either of the left or right subtrees differ by more</span>\r\n        <span class=\"hljs-comment\">// than 1, we cannot be balanced</span>\r\n        <span class=\"hljs-keyword\">if</span> (Math.abs(leftHeight - rightHeight) &gt; <span class=\"hljs-number\">1</span>) {\r\n            isBalanced[<span class=\"hljs-number\">0</span>] = <span class=\"hljs-literal\">false</span>;\r\n        }\r\n\r\n        <span class=\"hljs-comment\">// The height of our tree is the maximum of the heights of the left</span>\r\n        <span class=\"hljs-comment\">// and right subtrees plus one</span>\r\n        <span class=\"hljs-keyword\">return</span> Math.max(leftHeight, rightHeight) + <span class=\"hljs-number\">1</span>;\r\n    }\r\n\r\n    <span class=\"hljs-comment\">/**\r\n     * Iterative is BT balanced implementation\r\n     */</span>\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">boolean</span> <span class=\"hljs-title function_\">isBalancedIterative</span><span class=\"hljs-params\">(BinaryTree binaryTree)</span> {\r\n        <span class=\"hljs-comment\">// Default that we are balanced and our algo will prove it wrong</span>\r\n        <span class=\"hljs-type\">boolean</span> <span class=\"hljs-variable\">isBalanced</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">true</span>;\r\n\r\n        <span class=\"hljs-comment\">// Create a stack for our post order traversal</span>\r\n        Stack&lt;BTNode&gt; nodeStack = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Stack</span>&lt;BTNode&gt;();\r\n\r\n        <span class=\"hljs-comment\">// For post order traversal, we&#x27;ll have to keep track of where we</span>\r\n        <span class=\"hljs-comment\">// visited last</span>\r\n        <span class=\"hljs-type\">BTNode</span> <span class=\"hljs-variable\">lastVisited</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;\r\n\r\n        <span class=\"hljs-comment\">// Create a HashMap to keep track of the subtree heights for each node</span>\r\n        HashMap&lt;BTNode, Integer&gt; subtreeHeights = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashMap</span>&lt;BTNode, Integer&gt;();\r\n\r\n        <span class=\"hljs-comment\">// We begin at the root of the tree</span>\r\n        <span class=\"hljs-type\">BTNode</span> <span class=\"hljs-variable\">node</span> <span class=\"hljs-operator\">=</span> binaryTree.root;\r\n\r\n        <span class=\"hljs-comment\">// We loop while:</span>\r\n        <span class=\"hljs-comment\">// - the node stack is empty and the node we explore is null</span>\r\n        <span class=\"hljs-comment\">// AND</span>\r\n        <span class=\"hljs-comment\">// - the tree is still balanced</span>\r\n        <span class=\"hljs-keyword\">while</span> (!(nodeStack.isEmpty() &amp;&amp; node == <span class=\"hljs-literal\">null</span>) &amp;&amp; isBalanced) {\r\n            <span class=\"hljs-comment\">// If the node is not null, we push it to the stack and continue</span>\r\n            <span class=\"hljs-comment\">// to the left</span>\r\n            <span class=\"hljs-keyword\">if</span> (node != <span class=\"hljs-literal\">null</span>) {\r\n                nodeStack.push(node);\r\n                node = node.left;\r\n                <span class=\"hljs-comment\">// Once we hit a node that is null, we are as deep as we can go</span>\r\n                <span class=\"hljs-comment\">// to the left</span>\r\n            } <span class=\"hljs-keyword\">else</span> {\r\n                <span class=\"hljs-comment\">// Find the last node we put on the stack</span>\r\n                node = nodeStack.peek();\r\n\r\n                <span class=\"hljs-comment\">// If the right child of the node has either been visited or</span>\r\n                <span class=\"hljs-comment\">// is null, we visit this node</span>\r\n                <span class=\"hljs-keyword\">if</span> (node.right == <span class=\"hljs-literal\">null</span> || node.right == lastVisited) {\r\n                    <span class=\"hljs-comment\">// We assume the left and right heights are 0</span>\r\n                    <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">leftHeight</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;\r\n                    <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">rightHeight</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;\r\n\r\n                    <span class=\"hljs-comment\">// If the right and left children are not null, we must</span>\r\n                    <span class=\"hljs-comment\">// have already explored them and have a height</span>\r\n                    <span class=\"hljs-comment\">// for them so let&#x27;s get that</span>\r\n                    <span class=\"hljs-keyword\">if</span> (node.left != <span class=\"hljs-literal\">null</span>) {\r\n                        leftHeight = subtreeHeights.get(node.left);\r\n                    }\r\n\r\n                    <span class=\"hljs-keyword\">if</span> (node.right != <span class=\"hljs-literal\">null</span>) {\r\n                        rightHeight = subtreeHeights.get(node.right);\r\n                    }\r\n\r\n                    <span class=\"hljs-comment\">// If the difference in the height of the right subtree</span>\r\n                    <span class=\"hljs-comment\">// and left subtree differs by more than 1, we cannot be</span>\r\n                    <span class=\"hljs-comment\">// balanced</span>\r\n                    <span class=\"hljs-keyword\">if</span> (Math.abs(rightHeight - leftHeight) &gt; <span class=\"hljs-number\">1</span>) {\r\n                        isBalanced = <span class=\"hljs-literal\">false</span>;\r\n                    }\r\n\r\n                    <span class=\"hljs-comment\">// The height of the subtree containing this node is the</span>\r\n                    <span class=\"hljs-comment\">// max of the left and right subtree heighs plus 1</span>\r\n                    subtreeHeights.put(node, Math.max(rightHeight, leftHeight) + <span class=\"hljs-number\">1</span>);\r\n\r\n                    <span class=\"hljs-comment\">// We&#x27;ve now visited this node, so we pop it from the stack</span>\r\n                    nodeStack.pop();\r\n                    lastVisited = node;\r\n\r\n                    <span class=\"hljs-comment\">// Current visiting node is now null</span>\r\n                    node = <span class=\"hljs-literal\">null</span>;\r\n                    <span class=\"hljs-comment\">// If the right child node of this node has not been visited</span>\r\n                    <span class=\"hljs-comment\">// and is not null, we need to get that child node on the stack</span>\r\n                } <span class=\"hljs-keyword\">else</span> {\r\n                    node = node.right;\r\n                }\r\n            }\r\n        }\r\n\r\n        <span class=\"hljs-comment\">// Return whether or not the tree is balanced</span>\r\n        <span class=\"hljs-keyword\">return</span> isBalanced;\r\n    }\r\n\r\n    <span class=\"hljs-comment\">/**\r\n     * Generates the following unbalanced binary tree for testing 0 / \\ / \\ 0 0\r\n     * / / \\ / / \\ 0 0 0 / \\ / \\ 0 0 / / 0\r\n     */</span>\r\n    <span class=\"hljs-keyword\">private</span> BinaryTree <span class=\"hljs-title function_\">buildUnbalancedTree</span><span class=\"hljs-params\">()</span> {\r\n        <span class=\"hljs-type\">BinaryTree</span> <span class=\"hljs-variable\">tree</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BinaryTree</span>();\r\n        tree.root = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n\r\n        <span class=\"hljs-type\">BTNode</span> <span class=\"hljs-variable\">root</span> <span class=\"hljs-operator\">=</span> tree.root;\r\n        root.left = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n        root.right = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n\r\n        <span class=\"hljs-type\">BTNode</span> <span class=\"hljs-variable\">left</span> <span class=\"hljs-operator\">=</span> root.left;\r\n        <span class=\"hljs-type\">BTNode</span> <span class=\"hljs-variable\">right</span> <span class=\"hljs-operator\">=</span> root.right;\r\n\r\n        left.left = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n        right.left = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n        right.right = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n        right.left.right = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n\r\n        left = left.left;\r\n        left.left = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n        left.left.left = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n        left.left.left.left = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n\r\n        <span class=\"hljs-keyword\">return</span> tree;\r\n    }\r\n\r\n    <span class=\"hljs-comment\">/**\r\n     * Generates the following balanced binary tree for testing 0 / \\ / \\ 0 0 /\r\n     * \\ / \\ / 0 / \\ 0 0 0 / / / / 0 0\r\n     */</span>\r\n    <span class=\"hljs-keyword\">private</span> BinaryTree <span class=\"hljs-title function_\">buildBalancedTree</span><span class=\"hljs-params\">()</span> {\r\n        <span class=\"hljs-type\">BinaryTree</span> <span class=\"hljs-variable\">tree</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BinaryTree</span>();\r\n        tree.root = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n\r\n        <span class=\"hljs-type\">BTNode</span> <span class=\"hljs-variable\">root</span> <span class=\"hljs-operator\">=</span> tree.root;\r\n        root.left = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n        root.right = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n\r\n        <span class=\"hljs-type\">BTNode</span> <span class=\"hljs-variable\">left</span> <span class=\"hljs-operator\">=</span> root.left;\r\n        <span class=\"hljs-type\">BTNode</span> <span class=\"hljs-variable\">right</span> <span class=\"hljs-operator\">=</span> root.right;\r\n\r\n        left.left = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n        left.right = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n        right.left = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n        right.right = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n\r\n        right.right.left = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n\r\n        left.left.left = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BTNode</span>(<span class=\"hljs-number\">0</span>);\r\n\r\n        <span class=\"hljs-keyword\">return</span> tree;\r\n    }\r\n\r\n    <span class=\"hljs-comment\">/**\r\n     * Main\r\n     */</span>\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\r\n        <span class=\"hljs-comment\">// We create a new object to check the binary trees for balance</span>\r\n        <span class=\"hljs-type\">CheckIfBinaryTreeBalanced</span> <span class=\"hljs-variable\">balanceCheck</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">CheckIfBinaryTreeBalanced</span>();\r\n\r\n        <span class=\"hljs-comment\">// Build a balanced and unbalanced binary tree</span>\r\n        <span class=\"hljs-type\">BinaryTree</span> <span class=\"hljs-variable\">balancedTree</span> <span class=\"hljs-operator\">=</span> balanceCheck.buildBalancedTree();\r\n        <span class=\"hljs-type\">BinaryTree</span> <span class=\"hljs-variable\">unbalancedTree</span> <span class=\"hljs-operator\">=</span> balanceCheck.buildUnbalancedTree();\r\n\r\n        <span class=\"hljs-comment\">// Run basic tests on the algorithms to check for balance</span>\r\n        <span class=\"hljs-type\">boolean</span> <span class=\"hljs-variable\">isBalancedRB</span> <span class=\"hljs-operator\">=</span> balanceCheck.isBalancedRecursive(balancedTree); <span class=\"hljs-comment\">// true</span>\r\n        <span class=\"hljs-type\">boolean</span> <span class=\"hljs-variable\">isBalancedRU</span> <span class=\"hljs-operator\">=</span> balanceCheck.isBalancedRecursive(unbalancedTree); <span class=\"hljs-comment\">// false</span>\r\n        <span class=\"hljs-type\">boolean</span> <span class=\"hljs-variable\">isBalancedIB</span> <span class=\"hljs-operator\">=</span> balanceCheck.isBalancedIterative(balancedTree); <span class=\"hljs-comment\">// true</span>\r\n        <span class=\"hljs-type\">boolean</span> <span class=\"hljs-variable\">isBalancedIU</span> <span class=\"hljs-operator\">=</span> balanceCheck.isBalancedIterative(unbalancedTree); <span class=\"hljs-comment\">// false</span>\r\n\r\n        <span class=\"hljs-comment\">// Print the results</span>\r\n        System.out.println(<span class=\"hljs-string\">&quot;isBalancedRB: &quot;</span> + isBalancedRB);\r\n        System.out.println(<span class=\"hljs-string\">&quot;isBalancedRU: &quot;</span> + isBalancedRU);\r\n        System.out.println(<span class=\"hljs-string\">&quot;isBalancedIB: &quot;</span> + isBalancedIB);\r\n        System.out.println(<span class=\"hljs-string\">&quot;isBalancedIU: &quot;</span> + isBalancedIU);\r\n    }\r\n}\r\n"
    }
  },
  "contributors": [
    {
      "name": "Ian Cowan",
      "email": "38896380+iccowan@users.noreply.github.com",
      "commits": 1
    }
  ],
  "explanationUrl": {}
}