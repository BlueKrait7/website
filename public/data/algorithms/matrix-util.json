{
  "slug": "matrix-util",
  "name": "Matrix Util",
  "categories": [
    "math"
  ],
  "body": {},
  "implementations": {
    "java": {
      "dir": "src\\main\\java\\com\\thealgorithms\\maths\\MatrixUtil.java",
      "url": "https://github.com/TheAlgorithms/java/tree/master/src\\main\\java\\com\\thealgorithms\\maths\\MatrixUtil.java",
      "code": "<span class=\"hljs-keyword\">package</span> com.thealgorithms.maths;\r\n\r\n<span class=\"hljs-keyword\">import</span> java.math.BigDecimal;\r\n<span class=\"hljs-keyword\">import</span> java.util.Arrays;\r\n<span class=\"hljs-keyword\">import</span> java.util.Objects;\r\n<span class=\"hljs-keyword\">import</span> java.util.Optional;\r\n<span class=\"hljs-keyword\">import</span> java.util.function.BiFunction;\r\n<span class=\"hljs-keyword\">import</span> java.util.stream.IntStream;\r\n\r\n<span class=\"hljs-comment\">/**\r\n * <span class=\"hljs-doctag\">@author</span>: caos321\r\n * <span class=\"hljs-doctag\">@date</span>: 31 October 2021 (Sunday)\r\n */</span>\r\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MatrixUtil</span> {\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">boolean</span> <span class=\"hljs-title function_\">isValid</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix)</span> {\r\n        <span class=\"hljs-keyword\">return</span> matrix != <span class=\"hljs-literal\">null</span> &amp;&amp; matrix.length &gt; <span class=\"hljs-number\">0</span> &amp;&amp; matrix[<span class=\"hljs-number\">0</span>].length &gt; <span class=\"hljs-number\">0</span>;\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">boolean</span> <span class=\"hljs-title function_\">hasEqualSizes</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix1, <span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix2)</span> {\r\n        <span class=\"hljs-keyword\">return</span> isValid(matrix1) &amp;&amp; isValid(matrix2)\r\n                &amp;&amp; matrix1.length == matrix2.length\r\n                &amp;&amp; matrix1[<span class=\"hljs-number\">0</span>].length == matrix2[<span class=\"hljs-number\">0</span>].length;\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">boolean</span> <span class=\"hljs-title function_\">canMultiply</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix1, <span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix2)</span> {\r\n        <span class=\"hljs-keyword\">return</span> isValid(matrix1) &amp;&amp; isValid(matrix2)\r\n                &amp;&amp; matrix1[<span class=\"hljs-number\">0</span>].length == matrix2.length;\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> Optional&lt;BigDecimal[][]&gt; operate(<span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix1,\r\n            <span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix2,\r\n            <span class=\"hljs-keyword\">final</span> BiFunction&lt;BigDecimal, BigDecimal, BigDecimal&gt; operation) {\r\n        <span class=\"hljs-keyword\">if</span> (!hasEqualSizes(matrix1, matrix2)) {\r\n            <span class=\"hljs-keyword\">return</span> Optional.empty();\r\n        }\r\n\r\n        <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">rowSize</span> <span class=\"hljs-operator\">=</span> matrix1.length;\r\n        <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">columnSize</span> <span class=\"hljs-operator\">=</span> matrix1[<span class=\"hljs-number\">0</span>].length;\r\n\r\n        <span class=\"hljs-keyword\">final</span> BigDecimal[][] result = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>[rowSize][columnSize];\r\n\r\n        IntStream.range(<span class=\"hljs-number\">0</span>, rowSize).forEach(rowIndex\r\n                -&gt; IntStream.range(<span class=\"hljs-number\">0</span>, columnSize).forEach(columnIndex -&gt; {\r\n                    <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">BigDecimal</span> <span class=\"hljs-variable\">value1</span> <span class=\"hljs-operator\">=</span> matrix1[rowIndex][columnIndex];\r\n                    <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">BigDecimal</span> <span class=\"hljs-variable\">value2</span> <span class=\"hljs-operator\">=</span> matrix2[rowIndex][columnIndex];\r\n\r\n                    result[rowIndex][columnIndex] = operation.apply(value1, value2);\r\n                }));\r\n\r\n        <span class=\"hljs-keyword\">return</span> Optional.of(result);\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> Optional&lt;BigDecimal[][]&gt; add(<span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix1, <span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix2) {\r\n        <span class=\"hljs-keyword\">return</span> operate(matrix1, matrix2, BigDecimal::add);\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> Optional&lt;BigDecimal[][]&gt; subtract(<span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix1, <span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix2) {\r\n        <span class=\"hljs-keyword\">return</span> operate(matrix1, matrix2, BigDecimal::subtract);\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> Optional&lt;BigDecimal[][]&gt; multiply(<span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix1, <span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix2) {\r\n        <span class=\"hljs-keyword\">if</span> (!canMultiply(matrix1, matrix2)) {\r\n            <span class=\"hljs-keyword\">return</span> Optional.empty();\r\n        }\r\n\r\n        <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">size</span> <span class=\"hljs-operator\">=</span> matrix1[<span class=\"hljs-number\">0</span>].length;\r\n\r\n        <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">matrix1RowSize</span> <span class=\"hljs-operator\">=</span> matrix1.length;\r\n        <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">matrix2ColumnSize</span> <span class=\"hljs-operator\">=</span> matrix2[<span class=\"hljs-number\">0</span>].length;\r\n\r\n        <span class=\"hljs-keyword\">final</span> BigDecimal[][] result = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>[matrix1RowSize][matrix2ColumnSize];\r\n\r\n        IntStream.range(<span class=\"hljs-number\">0</span>, matrix1RowSize).forEach(rowIndex\r\n                -&gt; IntStream.range(<span class=\"hljs-number\">0</span>, matrix2ColumnSize).forEach(columnIndex\r\n                        -&gt; result[rowIndex][columnIndex] = IntStream.range(<span class=\"hljs-number\">0</span>, size).mapToObj(index -&gt; {\r\n                    <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">BigDecimal</span> <span class=\"hljs-variable\">value1</span> <span class=\"hljs-operator\">=</span> matrix1[rowIndex][index];\r\n                    <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">BigDecimal</span> <span class=\"hljs-variable\">value2</span> <span class=\"hljs-operator\">=</span> matrix2[index][columnIndex];\r\n\r\n                    <span class=\"hljs-keyword\">return</span> value1.multiply(value2);\r\n                })\r\n                        .reduce(BigDecimal.ZERO, BigDecimal::add)\r\n                )\r\n        );\r\n\r\n        <span class=\"hljs-keyword\">return</span> Optional.of(result);\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">assertThat</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> BigDecimal[][] actual, <span class=\"hljs-keyword\">final</span> BigDecimal[][] expected)</span> {\r\n        <span class=\"hljs-keyword\">if</span> (!Objects.deepEquals(actual, expected)) {\r\n            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">AssertionError</span>(String.format(\r\n                    <span class=\"hljs-string\">&quot;expected=%s but was actual=%s&quot;</span>,\r\n                    Arrays.deepToString(expected),\r\n                    Arrays.deepToString(actual)\r\n            ));\r\n        }\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> String[] args)</span> {\r\n        {\r\n            <span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix1 = {\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">3</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">2</span>)},\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">0</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">1</span>)},};\r\n\r\n            <span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix2 = {\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">1</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">3</span>)},\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">2</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">0</span>)},};\r\n\r\n            <span class=\"hljs-keyword\">final</span> BigDecimal[][] actual = add(matrix1, matrix2)\r\n                    .orElseThrow(() -&gt; <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">AssertionError</span>(<span class=\"hljs-string\">&quot;Could not compute matrix!&quot;</span>));\r\n\r\n            <span class=\"hljs-keyword\">final</span> BigDecimal[][] expected = {\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">4</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">5</span>)},\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">2</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">1</span>)}\r\n            };\r\n\r\n            assertThat(actual, expected);\r\n        }\r\n\r\n        {\r\n            <span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix1 = {\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">1</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">4</span>)},\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">5</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">6</span>)},};\r\n\r\n            <span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix2 = {\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">2</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">0</span>)},\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(-<span class=\"hljs-number\">2</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(-<span class=\"hljs-number\">3</span>)},};\r\n\r\n            <span class=\"hljs-keyword\">final</span> BigDecimal[][] actual = subtract(matrix1, matrix2)\r\n                    .orElseThrow(() -&gt; <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">AssertionError</span>(<span class=\"hljs-string\">&quot;Could not compute matrix!&quot;</span>));\r\n\r\n            <span class=\"hljs-keyword\">final</span> BigDecimal[][] expected = {\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(-<span class=\"hljs-number\">1</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">4</span>)},\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">7</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">9</span>)}\r\n            };\r\n\r\n            assertThat(actual, expected);\r\n        }\r\n\r\n        {\r\n            <span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix1 = {\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">1</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">2</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">3</span>)},\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">4</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">5</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">6</span>)},\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">7</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">8</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">9</span>)}\r\n            };\r\n\r\n            <span class=\"hljs-keyword\">final</span> BigDecimal[][] matrix2 = {\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">1</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">2</span>)},\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">3</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">4</span>)},\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">5</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">6</span>)}\r\n            };\r\n\r\n            <span class=\"hljs-keyword\">final</span> BigDecimal[][] actual = multiply(matrix1, matrix2)\r\n                    .orElseThrow(() -&gt; <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">AssertionError</span>(<span class=\"hljs-string\">&quot;Could not compute matrix!&quot;</span>));\r\n\r\n            <span class=\"hljs-keyword\">final</span> BigDecimal[][] expected = {\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">22</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">28</span>)},\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">49</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">64</span>)},\r\n                {<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">76</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BigDecimal</span>(<span class=\"hljs-number\">100</span>)}\r\n            };\r\n\r\n            assertThat(actual, expected);\r\n        }\r\n    }\r\n}\r\n"
    }
  },
  "contributors": [
    {
      "name": "caos321",
      "email": "36530240+caos321@users.noreply.github.com",
      "commits": 1
    }
  ],
  "explanationUrl": {}
}