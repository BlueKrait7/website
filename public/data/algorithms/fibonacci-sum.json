{
  "slug": "fibonacci-sum",
  "name": "Fibonacci Sum",
  "categories": [
    "math"
  ],
  "body": {},
  "implementations": {
    "c-plus-plus": {
      "dir": "math\\fibonacci_sum.cpp",
      "url": "https://github.com/TheAlgorithms/c-plus-plus/tree/master/math\\fibonacci_sum.cpp",
      "code": "<span class=\"hljs-comment\">/**\r\n * @file\r\n * @brief An algorithm to calculate the sum of [Fibonacci\r\n * Sequence](https://en.wikipedia.org/wiki/Fibonacci_number): \\f$\\mathrm{F}(n) +\r\n * \\mathrm{F}(n+1) + .. + \\mathrm{F}(m)\\f$\r\n * @details An algorithm to calculate the sum of Fibonacci Sequence:\r\n * \\f$\\mathrm{F}(n) + \\mathrm{F}(n+1) + .. + \\mathrm{F}(m)\\f$ where\r\n * \\f$\\mathrm{F}(i)\\f$ denotes the i-th Fibonacci Number . Note that F(0) = 0\r\n * and F(1) = 1. The value of the sum is calculated using matrix exponentiation.\r\n * Reference source:\r\n * https://stackoverflow.com/questions/4357223/finding-the-sum-of-fibonacci-numbers\r\n * @author [Sarthak Sahu](https://github.com/SarthakSahu1009)\r\n */</span>\r\n\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;cassert&gt;</span>   <span class=\"hljs-comment\">/// for assert</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;iostream&gt;</span>  <span class=\"hljs-comment\">/// for std::cin and std::cout</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;vector&gt;</span>    <span class=\"hljs-comment\">/// for std::vector</span></span>\r\n\r\n<span class=\"hljs-comment\">/**\r\n * @namespace math\r\n * @brief Mathematical algorithms\r\n */</span>\r\n<span class=\"hljs-keyword\">namespace</span> math {\r\n<span class=\"hljs-comment\">/**\r\n * @namespace fibonacci_sum\r\n * @brief Functions for the sum of the Fibonacci Sequence: \\f$\\mathrm{F}(n) +\r\n * \\mathrm{F}(n+1) + .. + \\mathrm{F}(m)\\f$\r\n */</span>\r\n<span class=\"hljs-keyword\">namespace</span> fibonacci_sum {\r\n<span class=\"hljs-keyword\">using</span> matrix = std::vector&lt;std::vector&lt;<span class=\"hljs-type\">uint64_t</span>&gt; &gt;;\r\n\r\n<span class=\"hljs-comment\">/**\r\n * Function to multiply two matrices\r\n * @param T matrix 1\r\n * @param A martix 2\r\n * @returns resultant matrix\r\n */</span>\r\nmath::<span class=\"hljs-function\">fibonacci_sum::matrix <span class=\"hljs-title\">multiply</span><span class=\"hljs-params\">(<span class=\"hljs-type\">const</span> math::fibonacci_sum::matrix &amp;T,\r\n                                     <span class=\"hljs-type\">const</span> math::fibonacci_sum::matrix &amp;A)</span> </span>{\r\n    math::<span class=\"hljs-function\">fibonacci_sum::matrix <span class=\"hljs-title\">result</span><span class=\"hljs-params\">(<span class=\"hljs-number\">2</span>, std::vector&lt;<span class=\"hljs-type\">uint64_t</span>&gt;(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">0</span>))</span></span>;\r\n\r\n    <span class=\"hljs-comment\">// multiplying matrices</span>\r\n    result[<span class=\"hljs-number\">0</span>][<span class=\"hljs-number\">0</span>] = T[<span class=\"hljs-number\">0</span>][<span class=\"hljs-number\">0</span>] * A[<span class=\"hljs-number\">0</span>][<span class=\"hljs-number\">0</span>] + T[<span class=\"hljs-number\">0</span>][<span class=\"hljs-number\">1</span>] * A[<span class=\"hljs-number\">1</span>][<span class=\"hljs-number\">0</span>];\r\n    result[<span class=\"hljs-number\">0</span>][<span class=\"hljs-number\">1</span>] = T[<span class=\"hljs-number\">0</span>][<span class=\"hljs-number\">0</span>] * A[<span class=\"hljs-number\">0</span>][<span class=\"hljs-number\">1</span>] + T[<span class=\"hljs-number\">0</span>][<span class=\"hljs-number\">1</span>] * A[<span class=\"hljs-number\">1</span>][<span class=\"hljs-number\">1</span>];\r\n    result[<span class=\"hljs-number\">1</span>][<span class=\"hljs-number\">0</span>] = T[<span class=\"hljs-number\">1</span>][<span class=\"hljs-number\">0</span>] * A[<span class=\"hljs-number\">0</span>][<span class=\"hljs-number\">0</span>] + T[<span class=\"hljs-number\">1</span>][<span class=\"hljs-number\">1</span>] * A[<span class=\"hljs-number\">1</span>][<span class=\"hljs-number\">0</span>];\r\n    result[<span class=\"hljs-number\">1</span>][<span class=\"hljs-number\">1</span>] = T[<span class=\"hljs-number\">1</span>][<span class=\"hljs-number\">0</span>] * A[<span class=\"hljs-number\">0</span>][<span class=\"hljs-number\">1</span>] + T[<span class=\"hljs-number\">1</span>][<span class=\"hljs-number\">1</span>] * A[<span class=\"hljs-number\">1</span>][<span class=\"hljs-number\">1</span>];\r\n\r\n    <span class=\"hljs-keyword\">return</span> result;\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * Function to compute A^n where A is a matrix.\r\n * @param T matrix\r\n * @param ex power\r\n * @returns resultant matrix\r\n */</span>\r\nmath::<span class=\"hljs-function\">fibonacci_sum::matrix <span class=\"hljs-title\">power</span><span class=\"hljs-params\">(math::fibonacci_sum::matrix T, <span class=\"hljs-type\">uint64_t</span> ex)</span> </span>{\r\n    math::fibonacci_sum::matrix A{{<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>}, {<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>}};\r\n    <span class=\"hljs-keyword\">if</span> (ex == <span class=\"hljs-number\">0</span> || ex == <span class=\"hljs-number\">1</span>) {\r\n        <span class=\"hljs-keyword\">return</span> T;\r\n    }\r\n\r\n    T = <span class=\"hljs-built_in\">power</span>(T, ex / <span class=\"hljs-number\">2</span>);\r\n    T = <span class=\"hljs-built_in\">multiply</span>(T, T);\r\n    <span class=\"hljs-keyword\">if</span> (ex &amp; <span class=\"hljs-number\">1</span>) {\r\n        T = <span class=\"hljs-built_in\">multiply</span>(T, A);\r\n    }\r\n    <span class=\"hljs-keyword\">return</span> T;\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * Function to compute sum of fibonacci sequence from 0 to n.\r\n * @param n number\r\n * @returns uint64_t ans, the sum of sequence\r\n */</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-type\">uint64_t</span> <span class=\"hljs-title\">result</span><span class=\"hljs-params\">(<span class=\"hljs-type\">uint64_t</span> n)</span> </span>{\r\n    math::fibonacci_sum::matrix T{{<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>}, {<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>}};\r\n    T = <span class=\"hljs-built_in\">power</span>(T, n);\r\n    <span class=\"hljs-type\">uint64_t</span> ans = T[<span class=\"hljs-number\">0</span>][<span class=\"hljs-number\">1</span>];\r\n    ans = (ans - <span class=\"hljs-number\">1</span>);\r\n    <span class=\"hljs-keyword\">return</span> ans;\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * Function to compute sum of fibonacci sequence from n to m.\r\n * @param n start of sequence\r\n * @param m end of sequence\r\n * @returns uint64_t the sum of sequence\r\n */</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-type\">uint64_t</span> <span class=\"hljs-title\">fiboSum</span><span class=\"hljs-params\">(<span class=\"hljs-type\">uint64_t</span> n, <span class=\"hljs-type\">uint64_t</span> m)</span> </span>{\r\n    <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-built_in\">result</span>(m + <span class=\"hljs-number\">2</span>) - <span class=\"hljs-built_in\">result</span>(n + <span class=\"hljs-number\">1</span>));\r\n}\r\n}  <span class=\"hljs-comment\">// namespace fibonacci_sum</span>\r\n}  <span class=\"hljs-comment\">// namespace math</span>\r\n\r\n<span class=\"hljs-comment\">/**\r\n * Function for testing fiboSum function.\r\n * test cases and assert statement.\r\n * @returns `void`\r\n */</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-type\">static</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title\">test</span><span class=\"hljs-params\">()</span> </span>{\r\n    <span class=\"hljs-type\">uint64_t</span> n = <span class=\"hljs-number\">0</span>, m = <span class=\"hljs-number\">3</span>;\r\n    <span class=\"hljs-type\">uint64_t</span> test_1 = math::fibonacci_sum::<span class=\"hljs-built_in\">fiboSum</span>(n, m);\r\n    <span class=\"hljs-built_in\">assert</span>(test_1 == <span class=\"hljs-number\">4</span>);\r\n    std::cout &lt;&lt; <span class=\"hljs-string\">&quot;Passed Test 1!&quot;</span> &lt;&lt; std::endl;\r\n\r\n    n = <span class=\"hljs-number\">3</span>;\r\n    m = <span class=\"hljs-number\">5</span>;\r\n    <span class=\"hljs-type\">uint64_t</span> test_2 = math::fibonacci_sum::<span class=\"hljs-built_in\">fiboSum</span>(n, m);\r\n    <span class=\"hljs-built_in\">assert</span>(test_2 == <span class=\"hljs-number\">10</span>);\r\n    std::cout &lt;&lt; <span class=\"hljs-string\">&quot;Passed Test 2!&quot;</span> &lt;&lt; std::endl;\r\n\r\n    n = <span class=\"hljs-number\">5</span>;\r\n    m = <span class=\"hljs-number\">7</span>;\r\n    <span class=\"hljs-type\">uint64_t</span> test_3 = math::fibonacci_sum::<span class=\"hljs-built_in\">fiboSum</span>(n, m);\r\n    <span class=\"hljs-built_in\">assert</span>(test_3 == <span class=\"hljs-number\">26</span>);\r\n    std::cout &lt;&lt; <span class=\"hljs-string\">&quot;Passed Test 3!&quot;</span> &lt;&lt; std::endl;\r\n\r\n    n = <span class=\"hljs-number\">7</span>;\r\n    m = <span class=\"hljs-number\">10</span>;\r\n    <span class=\"hljs-type\">uint64_t</span> test_4 = math::fibonacci_sum::<span class=\"hljs-built_in\">fiboSum</span>(n, m);\r\n    <span class=\"hljs-built_in\">assert</span>(test_4 == <span class=\"hljs-number\">123</span>);\r\n    std::cout &lt;&lt; <span class=\"hljs-string\">&quot;Passed Test 4!&quot;</span> &lt;&lt; std::endl;\r\n\r\n    n = <span class=\"hljs-number\">9</span>;\r\n    m = <span class=\"hljs-number\">12</span>;\r\n    <span class=\"hljs-type\">uint64_t</span> test_5 = math::fibonacci_sum::<span class=\"hljs-built_in\">fiboSum</span>(n, m);\r\n    <span class=\"hljs-built_in\">assert</span>(test_5 == <span class=\"hljs-number\">322</span>);\r\n    std::cout &lt;&lt; <span class=\"hljs-string\">&quot;Passed Test 5!&quot;</span> &lt;&lt; std::endl;\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * @brief Main function\r\n * @returns 0 on exit\r\n */</span>\r\n<span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span> </span>{\r\n    <span class=\"hljs-built_in\">test</span>();  <span class=\"hljs-comment\">// execute the tests</span>\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\r\n}\r\n"
    }
  },
  "contributors": [],
  "explanationUrl": {}
}