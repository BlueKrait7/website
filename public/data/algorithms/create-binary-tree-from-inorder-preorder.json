{
  "slug": "create-binary-tree-from-inorder-preorder",
  "name": "Create Binary Tree From Inorder Preorder",
  "categories": [
    "datastructures",
    "tree"
  ],
  "body": {},
  "implementations": {
    "java": {
      "dir": "src\\main\\java\\com\\thealgorithms\\datastructures\\trees\\CreateBinaryTreeFromInorderPreorder.java",
      "url": "https://github.com/TheAlgorithms/java/tree/master/src\\main\\java\\com\\thealgorithms\\datastructures\\trees\\CreateBinaryTreeFromInorderPreorder.java",
      "code": "<span class=\"hljs-keyword\">package</span> com.thealgorithms.datastructures.trees;\r\n\r\n<span class=\"hljs-keyword\">import</span> java.util.HashMap;\r\n<span class=\"hljs-keyword\">import</span> java.util.Map;\r\n<span class=\"hljs-keyword\">import</span> com.thealgorithms.datastructures.trees.BinaryTree.Node;\r\n\r\n<span class=\"hljs-comment\">/**\r\n * Approach: Naive Solution: Create root node from first value present in\r\n * preorder traversal. Look for the index of root node&#x27;s value in inorder\r\n * traversal. That will tell total nodes present in left subtree and right\r\n * subtree. Based on that index create left and right subtree. Complexity: Time:\r\n * O(n^2) for each node there is iteration to find index in inorder array Space:\r\n * Stack size = O(height) = O(lg(n))\r\n *\r\n * Optimized Solution: Instead of iterating over inorder array to find index of\r\n * root value, create a hashmap and find out the index of root value.\r\n * Complexity: Time: O(n) hashmap reduced iteration to find index in inorder\r\n * array Space: O(n) space taken by hashmap\r\n *\r\n */</span>\r\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CreateBinaryTreeFromInorderPreorder</span> {\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\r\n        test(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Integer</span>[]{}, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Integer</span>[]{}); <span class=\"hljs-comment\">// empty tree</span>\r\n        test(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Integer</span>[]{<span class=\"hljs-number\">1</span>}, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Integer</span>[]{<span class=\"hljs-number\">1</span>}); <span class=\"hljs-comment\">// single node tree</span>\r\n        test(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Integer</span>[]{<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>}, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Integer</span>[]{<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>}); <span class=\"hljs-comment\">// right skewed tree</span>\r\n        test(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Integer</span>[]{<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>}, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Integer</span>[]{<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">1</span>}); <span class=\"hljs-comment\">// left skewed tree</span>\r\n        test(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Integer</span>[]{<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">7</span>}, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Integer</span>[]{<span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">7</span>}); <span class=\"hljs-comment\">// normal tree</span>\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> Integer[] preorder, <span class=\"hljs-keyword\">final</span> Integer[] inorder)</span> {\r\n        System.out.println(<span class=\"hljs-string\">&quot;\\n====================================================&quot;</span>);\r\n        System.out.println(<span class=\"hljs-string\">&quot;Naive Solution...&quot;</span>);\r\n        <span class=\"hljs-type\">BinaryTree</span> <span class=\"hljs-variable\">root</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BinaryTree</span>(createTree(preorder, inorder, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, inorder.length));\r\n        System.out.println(<span class=\"hljs-string\">&quot;Preorder Traversal: &quot;</span>);\r\n        root.preOrder(root.getRoot());\r\n        System.out.println(<span class=\"hljs-string\">&quot;\\nInorder Traversal: &quot;</span>);\r\n        root.inOrder(root.getRoot());\r\n        System.out.println(<span class=\"hljs-string\">&quot;\\nPostOrder Traversal: &quot;</span>);\r\n        root.postOrder(root.getRoot());\r\n\r\n        Map&lt;Integer, Integer&gt; map = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashMap</span>&lt;&gt;();\r\n        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; inorder.length; i++) {\r\n            map.put(inorder[i], i);\r\n        }\r\n        <span class=\"hljs-type\">BinaryTree</span> <span class=\"hljs-variable\">optimizedRoot</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BinaryTree</span>(createTreeOptimized(preorder, inorder, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, inorder.length, map));\r\n        System.out.println(<span class=\"hljs-string\">&quot;\\n\\nOptimized solution...&quot;</span>);\r\n        System.out.println(<span class=\"hljs-string\">&quot;Preorder Traversal: &quot;</span>);\r\n        optimizedRoot.preOrder(root.getRoot());\r\n        System.out.println(<span class=\"hljs-string\">&quot;\\nInorder Traversal: &quot;</span>);\r\n        optimizedRoot.inOrder(root.getRoot());\r\n        System.out.println(<span class=\"hljs-string\">&quot;\\nPostOrder Traversal: &quot;</span>);\r\n        optimizedRoot.postOrder(root.getRoot());\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> Node <span class=\"hljs-title function_\">createTree</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> Integer[] preorder, <span class=\"hljs-keyword\">final</span> Integer[] inorder,\r\n            <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> preStart, <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> inStart, <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> size)</span> {\r\n        <span class=\"hljs-keyword\">if</span> (size == <span class=\"hljs-number\">0</span>) {\r\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;\r\n        }\r\n\r\n        <span class=\"hljs-type\">Node</span> <span class=\"hljs-variable\">root</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Node</span>(preorder[preStart]);\r\n        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> inStart;\r\n        <span class=\"hljs-keyword\">while</span> (preorder[preStart] != inorder[i]) {\r\n            i++;\r\n        }\r\n        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">leftNodesCount</span> <span class=\"hljs-operator\">=</span> i - inStart;\r\n        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">rightNodesCount</span> <span class=\"hljs-operator\">=</span> size - leftNodesCount - <span class=\"hljs-number\">1</span>;\r\n        root.left = createTree(preorder, inorder, preStart + <span class=\"hljs-number\">1</span>, inStart, leftNodesCount);\r\n        root.right = createTree(preorder, inorder, preStart + leftNodesCount + <span class=\"hljs-number\">1</span>, i + <span class=\"hljs-number\">1</span>,\r\n                rightNodesCount);\r\n        <span class=\"hljs-keyword\">return</span> root;\r\n\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> Node <span class=\"hljs-title function_\">createTreeOptimized</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> Integer[] preorder, <span class=\"hljs-keyword\">final</span> Integer[] inorder,\r\n            <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> preStart, <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> inStart, <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> size,\r\n            <span class=\"hljs-keyword\">final</span> Map&lt;Integer, Integer&gt; inorderMap)</span> {\r\n        <span class=\"hljs-keyword\">if</span> (size == <span class=\"hljs-number\">0</span>) {\r\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;\r\n        }\r\n\r\n        <span class=\"hljs-type\">Node</span> <span class=\"hljs-variable\">root</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Node</span>(preorder[preStart]);\r\n        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> inorderMap.get(preorder[preStart]);\r\n        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">leftNodesCount</span> <span class=\"hljs-operator\">=</span> i - inStart;\r\n        <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">rightNodesCount</span> <span class=\"hljs-operator\">=</span> size - leftNodesCount - <span class=\"hljs-number\">1</span>;\r\n        root.left = createTreeOptimized(preorder, inorder, preStart + <span class=\"hljs-number\">1</span>, inStart,\r\n                leftNodesCount, inorderMap);\r\n        root.right = createTreeOptimized(preorder, inorder, preStart + leftNodesCount + <span class=\"hljs-number\">1</span>,\r\n                i + <span class=\"hljs-number\">1</span>, rightNodesCount, inorderMap);\r\n        <span class=\"hljs-keyword\">return</span> root;\r\n    }\r\n\r\n}\r\n"
    }
  },
  "contributors": [
    {
      "name": "Aitor Fidalgo Sánchez",
      "email": "64830228+aitorfi@users.noreply.github.com",
      "commits": 1
    },
    {
      "name": "Amit Kumar",
      "email": "kumanoit@users.noreply.github.com",
      "commits": 1
    }
  ],
  "explanationUrl": {}
}