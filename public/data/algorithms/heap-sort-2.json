{
  "slug": "heap-sort-2",
  "name": "Heap Sort 2",
  "categories": [
    "sorts"
  ],
  "body": {},
  "implementations": {
    "c": {
      "dir": "sorting\\heap_sort_2.c",
      "url": "https://github.com/TheAlgorithms/c/tree/master/sorting\\heap_sort_2.c",
      "code": "<span class=\"hljs-comment\">/**\r\n * @file\r\n * @author [Dhruv Pasricha](https://github.com/DhruvPasricha)\r\n * @brief [Heap Sort](https://en.wikipedia.org/wiki/Heapsort) implementation\r\n * @details\r\n * Heap-sort is a comparison-based sorting algorithm.\r\n * Heap-sort can be thought of as an improved selection sort:\r\n * like selection sort, heap sort divides its input into a sorted\r\n * and an unsorted region, and it iteratively shrinks the unsorted\r\n * region by extracting the largest element from it and inserting\r\n * it into the sorted region.\r\n *\r\n * Unlike selection sort,\r\n * heap sort does not waste time with a linear-time scan of the\r\n * unsorted region; rather, heap sort maintains the unsorted region\r\n * in a heap data structure to more quickly find the largest element\r\n * in each step.\r\n * Time Complexity : O(Nlog(N))\r\n */</span>\r\n\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;assert.h&gt;</span>   <span class=\"hljs-comment\">/// for assert</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;stdio.h&gt;</span>    <span class=\"hljs-comment\">/// for IO operations</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;stdlib.h&gt;</span>   <span class=\"hljs-comment\">/// for dynamic memory allocation</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;time.h&gt;</span>     <span class=\"hljs-comment\">/// for random numbers generation</span></span>\r\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;inttypes.h&gt;</span> <span class=\"hljs-comment\">/// for uint8_t, int8_t</span></span>\r\n\r\n<span class=\"hljs-comment\">/**\r\n * @brief Swapped two numbers using pointer\r\n * @param first pointer of first number\r\n * @param second pointer of second number\r\n */</span>\r\n<span class=\"hljs-type\">void</span> <span class=\"hljs-title function_\">swap</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int8_t</span> *first, <span class=\"hljs-type\">int8_t</span> *second)</span>\r\n{\r\n    <span class=\"hljs-type\">int8_t</span> temp = *first;\r\n    *first = *second;\r\n    *second = temp;\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * @brief heapifyDown Adjusts new root to the correct position in the heap\r\n * This heapify procedure can be thought of as building a heap from\r\n * the top down by successively shifting downward to establish the\r\n * heap property.\r\n * @param arr array to be sorted\r\n * @param size size of array\r\n * @return void\r\n*/</span>\r\n<span class=\"hljs-type\">void</span> <span class=\"hljs-title function_\">heapifyDown</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int8_t</span> *arr, <span class=\"hljs-type\">const</span> <span class=\"hljs-type\">uint8_t</span> size)</span>\r\n{\r\n    <span class=\"hljs-type\">uint8_t</span> i = <span class=\"hljs-number\">0</span>;\r\n\r\n    <span class=\"hljs-keyword\">while</span> (<span class=\"hljs-number\">2</span> * i + <span class=\"hljs-number\">1</span> &lt; size)\r\n    {\r\n        <span class=\"hljs-type\">uint8_t</span> maxChild = <span class=\"hljs-number\">2</span> * i + <span class=\"hljs-number\">1</span>;\r\n\r\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-number\">2</span> * i + <span class=\"hljs-number\">2</span> &lt; size &amp;&amp; arr[<span class=\"hljs-number\">2</span> * i + <span class=\"hljs-number\">2</span>] &gt; arr[maxChild])\r\n        {\r\n            maxChild = <span class=\"hljs-number\">2</span> * i + <span class=\"hljs-number\">2</span>;\r\n        }\r\n\r\n        <span class=\"hljs-keyword\">if</span> (arr[maxChild] &gt; arr[i])\r\n        {\r\n            swap(&amp;arr[i], &amp;arr[maxChild]);\r\n            i = maxChild;\r\n        }\r\n        <span class=\"hljs-keyword\">else</span>\r\n        {\r\n            <span class=\"hljs-keyword\">break</span>;\r\n        }\r\n    }\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * @brief heapifyUp Adjusts arr[i] to the correct position in the heap\r\n * This heapify procedure can be thought of as building a heap from\r\n * the bottom up by successively shifting upward to establish the\r\n * heap property.\r\n * @param arr array to be sorted\r\n * @param i index of the pushed element\r\n * @return void\r\n*/</span>\r\n<span class=\"hljs-type\">void</span> <span class=\"hljs-title function_\">heapifyUp</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int8_t</span> *arr, <span class=\"hljs-type\">uint8_t</span> i)</span>\r\n{\r\n    <span class=\"hljs-keyword\">while</span> (i &gt; <span class=\"hljs-number\">0</span> &amp;&amp; arr[(i - <span class=\"hljs-number\">1</span>) / <span class=\"hljs-number\">2</span>] &lt; arr[i])\r\n    {\r\n        swap(&amp;arr[(i - <span class=\"hljs-number\">1</span>) / <span class=\"hljs-number\">2</span>], &amp;arr[i]);\r\n        i = (i - <span class=\"hljs-number\">1</span>) / <span class=\"hljs-number\">2</span>;\r\n    }\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * @brief Heap Sort algorithm\r\n * @param arr array to be sorted\r\n * @param size size of the array\r\n * @returns void\r\n */</span>\r\n<span class=\"hljs-type\">void</span> <span class=\"hljs-title function_\">heapSort</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int8_t</span> *arr, <span class=\"hljs-type\">const</span> <span class=\"hljs-type\">uint8_t</span> size)</span>\r\n{\r\n    <span class=\"hljs-keyword\">if</span> (size &lt;= <span class=\"hljs-number\">1</span>)\r\n    {\r\n        <span class=\"hljs-keyword\">return</span>;\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">uint8_t</span> i = <span class=\"hljs-number\">0</span>; i &lt; size; i++)\r\n    {\r\n        <span class=\"hljs-comment\">// Pushing `arr[i]` to the heap</span>\r\n\r\n        <span class=\"hljs-comment\">/*heapifyUp Adjusts arr[i] to the correct position in the heap*/</span>\r\n        heapifyUp(arr, i);\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">uint8_t</span> i = size - <span class=\"hljs-number\">1</span>; i &gt;= <span class=\"hljs-number\">1</span>; i--)\r\n    {\r\n        <span class=\"hljs-comment\">// Moving current root to the end</span>\r\n        swap(&amp;arr[<span class=\"hljs-number\">0</span>], &amp;arr[i]);\r\n\r\n        <span class=\"hljs-comment\">// `heapifyDown` adjusts new root to the correct position in the heap</span>\r\n        heapifyDown(arr, i);\r\n\r\n    }\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * @brief Self-test implementations\r\n * @returns void\r\n */</span>\r\n<span class=\"hljs-type\">static</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title function_\">test</span><span class=\"hljs-params\">()</span>\r\n{\r\n    <span class=\"hljs-type\">const</span> <span class=\"hljs-type\">uint8_t</span> size = <span class=\"hljs-number\">10</span>;\r\n    <span class=\"hljs-type\">int8_t</span> *arr = (<span class=\"hljs-type\">int8_t</span> *)<span class=\"hljs-built_in\">calloc</span>(size, <span class=\"hljs-keyword\">sizeof</span>(<span class=\"hljs-type\">int8_t</span>));\r\n\r\n    <span class=\"hljs-comment\">/* generate size random numbers from 0 to 100 */</span>\r\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">uint8_t</span> i = <span class=\"hljs-number\">0</span>; i &lt; size; i++)\r\n    {\r\n        arr[i] = rand() % <span class=\"hljs-number\">100</span>;\r\n    }\r\n    heapSort(arr, size);\r\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">uint8_t</span> i = <span class=\"hljs-number\">0</span>; i &lt; size - <span class=\"hljs-number\">1</span>; ++i)\r\n    {\r\n        assert(arr[i] &lt;= arr[i + <span class=\"hljs-number\">1</span>]);\r\n    }\r\n    <span class=\"hljs-built_in\">free</span>(arr);\r\n}\r\n\r\n<span class=\"hljs-comment\">/**\r\n * @brief Main function\r\n * @returns 0 on exit\r\n */</span>\r\n<span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">()</span>\r\n{\r\n    <span class=\"hljs-comment\">// Intializes random number generator</span>\r\n    srand(time(<span class=\"hljs-literal\">NULL</span>));\r\n\r\n    test(); <span class=\"hljs-comment\">// run self-test implementations</span>\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\r\n}\r\n"
    }
  },
  "contributors": [
    {
      "name": "Dhruv Pasricha",
      "email": "78498002+DhruvPasricha@users.noreply.github.com",
      "commits": 2
    }
  ],
  "explanationUrl": {}
}